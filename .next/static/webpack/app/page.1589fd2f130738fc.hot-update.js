"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/lib/audioEngine.ts":
/*!********************************!*\
  !*** ./src/lib/audioEngine.ts ***!
  \********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CelestialAudioEngine: function() { return /* binding */ CelestialAudioEngine; },\n/* harmony export */   getAudioEngine: function() { return /* binding */ getAudioEngine; },\n/* harmony export */   resetAudioEngine: function() { return /* binding */ resetAudioEngine; }\n/* harmony export */ });\n/* harmony import */ var _orbital_mechanics__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./orbital-mechanics */ \"(app-pages-browser)/./src/lib/orbital-mechanics.ts\");\n/* harmony import */ var _data_planets__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/data/planets */ \"(app-pages-browser)/./src/data/planets.ts\");\n\n\n// Tone.js will be imported dynamically\nlet Tone;\nclass CelestialAudioEngine {\n    /**\n   * Set the Tone.js reference from external source\n   */ setToneReference(toneRef) {\n        Tone = toneRef;\n        console.log(\"\\uD83D\\uDD0D Tone.js reference set from external source\");\n        if (Tone.version) {\n            console.log(\"\\uD83D\\uDD0D Tone.js version:\", Tone.version);\n        }\n    }\n    async initialize() {\n        if (this.isInitialized) return;\n        try {\n            console.log(\"Initializing Celestial Audio Engine with Tone.js...\");\n            // Use Tone.js reference if already set, otherwise import it\n            if (!Tone) {\n                console.log(\"\\uD83D\\uDD0D Loading Tone.js...\");\n                // Try different Tone.js import approaches\n                console.log(\"\\uD83D\\uDD0D Attempting Tone.js import...\");\n                // Method 1: Simple Tone.js v14 import\n                try {\n                    console.log(\"\\uD83D\\uDD0D Attempting simple Tone.js v14 import...\");\n                    // Try to import Tone.js with error handling for chunk loading\n                    let toneModule;\n                    try {\n                        toneModule = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_tone_build_Tone_js\").then(__webpack_require__.bind(__webpack_require__, /*! tone */ \"(app-pages-browser)/./node_modules/tone/build/Tone.js\"));\n                        console.log(\"\\uD83D\\uDD0D Tone.js module imported\");\n                        console.log(\"\\uD83D\\uDD0D Module keys:\", Object.keys(toneModule));\n                    } catch (importError) {\n                        console.error(\"❌ Tone.js chunk import failed:\", importError);\n                        // Try alternative import method\n                        console.log(\"\\uD83D\\uDD0D Trying alternative Tone.js import...\");\n                        toneModule = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_tone_build_Tone_js\").then(__webpack_require__.bind(__webpack_require__, /*! tone/build/Tone */ \"(app-pages-browser)/./node_modules/tone/build/Tone.js\"));\n                        console.log(\"\\uD83D\\uDD0D Tone.js imported via build path\");\n                    }\n                    // Try to use the module directly\n                    Tone = toneModule;\n                    // Check if we have basic functionality\n                    console.log(\"\\uD83D\\uDD0D Checking basic functionality...\");\n                    console.log(\"\\uD83D\\uDD0D Tone.start type:\", typeof Tone.start);\n                    console.log(\"\\uD83D\\uDD0D Tone.Transport type:\", typeof Tone.Transport);\n                    // Try to start Tone.js context first\n                    if (typeof Tone.start === \"function\") {\n                        console.log(\"\\uD83D\\uDD0D Starting Tone.js context...\");\n                        await Tone.start();\n                        console.log(\"✅ Tone.js context started successfully\");\n                    } else {\n                        console.log(\"❌ Tone.start is not a function\");\n                    }\n                    console.log(\"\\uD83D\\uDD0D Tone.js imported successfully\");\n                    if (Tone.version) {\n                        console.log(\"\\uD83D\\uDD0D Tone.js version:\", Tone.version);\n                    } else {\n                        console.log(\"\\uD83D\\uDD0D Tone.js version: not available\");\n                    }\n                    // Debug the complete Tone.js structure\n                    console.log(\"\\uD83D\\uDD0D Complete Tone.js structure:\");\n                    Object.keys(Tone).forEach((key)=>{\n                        console.log(\"  - \".concat(key, \": \").concat(typeof Tone[key]));\n                        if (typeof Tone[key] === \"object\" && Tone[key] !== null) {\n                            console.log(\"    Properties: \".concat(Object.keys(Tone[key])));\n                        }\n                    });\n                    // Check for common Tone.js v14 patterns\n                    console.log(\"\\uD83D\\uDD0D Checking for Tone.js v14 patterns...\");\n                    // Check if there's a default export\n                    if (Tone.default) {\n                        console.log(\"\\uD83D\\uDD0D Found default export:\", typeof Tone.default);\n                        console.log(\"\\uD83D\\uDD0D Default export keys:\", Object.keys(Tone.default));\n                    }\n                    // Check if there are sub-modules\n                    if (Tone.Component) {\n                        console.log(\"\\uD83D\\uDD0D Found Component module:\", Object.keys(Tone.Component));\n                    }\n                    if (Tone.Effect) {\n                        console.log(\"\\uD83D\\uDD0D Found Effect module:\", Object.keys(Tone.Effect));\n                    }\n                    if (Tone.Instrument) {\n                        console.log(\"\\uD83D\\uDD0D Found Instrument module:\", Object.keys(Tone.Instrument));\n                    }\n                    if (Tone.Signal) {\n                        console.log(\"\\uD83D\\uDD0D Found Signal module:\", Object.keys(Tone.Signal));\n                    }\n                    // Try to find Volume in different locations\n                    const volumeLocations = [\n                        \"Volume\",\n                        \"Component.Volume\",\n                        \"Effect.Volume\",\n                        \"Signal.Volume\",\n                        \"default.Volume\",\n                        \"default.Component.Volume\",\n                        \"default.Effect.Volume\"\n                    ];\n                    volumeLocations.forEach((location)=>{\n                        try {\n                            const parts = location.split(\".\");\n                            let obj = Tone;\n                            for (const part of parts){\n                                if (obj && obj[part]) {\n                                    obj = obj[part];\n                                } else {\n                                    obj = null;\n                                    break;\n                                }\n                            }\n                            if (obj && typeof obj === \"function\") {\n                                console.log(\"✅ Found Volume constructor at: Tone.\".concat(location));\n                                this.VolumeConstructor = obj;\n                            } else if (obj && typeof obj === \"object\") {\n                                console.log(\"\\uD83D\\uDD0D Found Volume object at: Tone.\".concat(location), Object.keys(obj));\n                            }\n                        } catch (e) {\n                        // Ignore errors\n                        }\n                    });\n                } catch (e) {\n                    console.error(\"❌ All Tone.js import methods failed:\", e);\n                    console.log(\"\\uD83D\\uDD0D Continuing without audio - solar system will work but without sound\");\n                    // Set up a dummy audio engine that doesn't produce sound but doesn't break the app\n                    Tone = {\n                        start: async ()=>console.log(\"\\uD83D\\uDD24 Dummy audio start called\"),\n                        Transport: {\n                            bpm: {\n                                value: 120\n                            },\n                            start: ()=>console.log(\"\\uD83D\\uDD24 Dummy Transport start called\"),\n                            stop: ()=>console.log(\"\\uD83D\\uDD24 Dummy Transport stop called\"),\n                            cancel: ()=>console.log(\"\\uD83D\\uDD24 Dummy Transport cancel called\")\n                        },\n                        context: {\n                            rawContext: null\n                        },\n                        getContext: ()=>({\n                                rawContext: null\n                            }),\n                        version: \"dummy\"\n                    };\n                    // Set basic initialization state\n                    this.isInitialized = true;\n                    this.audioState = {\n                        isInitialized: true,\n                        isPlaying: false,\n                        hasError: true,\n                        error: {\n                            type: \"initialization\",\n                            message: \"Audio failed to load, continuing without sound\",\n                            timestamp: Date.now(),\n                            recoverable: false\n                        },\n                        contextState: \"unknown\"\n                    };\n                    return; // Skip the rest of initialization\n                }\n            }\n            console.log(\"\\uD83D\\uDD0D Tone.js version:\", Tone.version);\n            console.log(\"\\uD83D\\uDD0D Available Tone constructors:\", Object.keys(Tone).filter((key)=>typeof Tone[key] === \"function\"));\n            console.log(\"\\uD83D\\uDD0D All Tone properties:\", Object.keys(Tone));\n            console.log(\"\\uD83D\\uDD0D Tone.Volume type:\", typeof Tone.Volume);\n            console.log(\"\\uD83D\\uDD0D Tone.Reverb type:\", typeof Tone.Reverb);\n            console.log(\"\\uD83D\\uDD0D Tone.Synth type:\", typeof Tone.Synth);\n            // Start with basic Tone.js functionality - skip effects for now\n            console.log(\"\\uD83D\\uDD0D Skipping effects creation for now, focusing on basic functionality...\");\n            // Create a simple gain node as master volume using Web Audio API directly\n            try {\n                console.log(\"\\uD83D\\uDD0D Creating basic gain node for volume control...\");\n                let audioContext;\n                // Try to get audio context from Tone.js\n                if (Tone && Tone.getContext && typeof Tone.getContext === \"function\") {\n                    audioContext = Tone.getContext().rawContext;\n                    console.log(\"✅ Got audio context from Tone.js\");\n                } else if (Tone && Tone.context && Tone.context.rawContext) {\n                    audioContext = Tone.context.rawContext;\n                    console.log(\"✅ Got audio context from Tone.context\");\n                } else {\n                    // Fallback: create our own audio context\n                    audioContext = new (window.AudioContext || window.webkitAudioContext)();\n                    console.log(\"✅ Created fallback audio context\");\n                }\n                this.masterVolume = audioContext.createGain();\n                this.masterVolume.gain.value = 0.3; // -10dB approximately\n                this.masterVolume.connect(audioContext.destination);\n                this.audioContext = audioContext;\n                console.log(\"✅ Basic gain node created successfully\");\n            } catch (e) {\n                console.log(\"❌ Basic gain node creation failed:\", e);\n                throw new Error(\"Failed to create basic gain node: \".concat(e));\n            }\n            // Set other effects to null for now\n            this.reverb = null;\n            this.compressor = null;\n            this.eq3 = null;\n            this.limiter = null;\n            // No effects chain to connect since we're using basic gain node directly connected to destination\n            // Set up Transport with null checks\n            try {\n                console.log(\"\\uD83D\\uDD0D Setting up Transport...\");\n                if (Tone.Transport && Tone.Transport.bpm) {\n                    Tone.Transport.bpm.value = this.settings.tempo;\n                    console.log(\"✅ Transport BPM set successfully\");\n                } else {\n                    console.log(\"⚠️ Tone.Transport not available, skipping Transport setup\");\n                }\n            } catch (e) {\n                console.log(\"❌ Transport setup failed:\", e);\n            // Don't throw here, Transport is not critical for basic functionality\n            }\n            // Store audio context reference\n            try {\n                if (Tone.context && Tone.context.rawContext) {\n                    this.audioContext = Tone.context.rawContext;\n                    console.log(\"✅ Audio context reference stored\");\n                } else {\n                    console.log(\"⚠️ Tone.context not available, using fallback context\");\n                // We already created a fallback context earlier\n                }\n            } catch (e) {\n                console.log(\"❌ Audio context reference storage failed:\", e);\n            }\n            this.isInitialized = true;\n            this.audioState.isInitialized = true;\n            this.updateContextState();\n            this.clearError(); // Clear any previous errors\n            console.log(\"\\uD83C\\uDFB5 Celestial Audio Engine initialized successfully\");\n        } catch (error) {\n            const audioError = {\n                type: \"initialization\",\n                message: error instanceof Error ? error.message : \"Unknown initialization error\",\n                timestamp: Date.now(),\n                recoverable: true\n            };\n            console.error(\"Failed to initialize audio engine:\", error);\n            this.reportError(audioError);\n            // Attempt recovery\n            const recovered = await this.attemptRecovery(audioError);\n            if (!recovered) {\n                throw error;\n            }\n        }\n    }\n    /**\n   * Map planetary distance to frequency using inverse relationship\n   * Closer planets = higher frequencies (200-800Hz range)\n   */ mapDistanceToFrequency(distanceFromSun) {\n        // Inverse mapping: closer planets get higher frequencies\n        const minDistance = 0.39; // Mercury\n        const maxDistance = 39.48; // Neptune\n        // Inverse relationship with some logarithmic scaling\n        const normalizedDistance = (distanceFromSun - minDistance) / (maxDistance - minDistance);\n        const inverseFactor = 1 - normalizedDistance;\n        // Map to frequency range (200Hz to 800Hz)\n        const minFreq = 200;\n        const maxFreq = 800;\n        // Apply logarithmic scaling for more musical results\n        const frequency = minFreq + (maxFreq - minFreq) * Math.pow(inverseFactor, 0.7);\n        return Math.round(frequency * 100) / 100; // Round to 2 decimal places\n    }\n    /**\n   * Create a unique synth for each planet with celestial characteristics\n   */ createPlanetSynth(planet) {\n        try {\n            if (!Tone) {\n                throw new Error(\"Tone.js is not available\");\n            }\n            const frequency = this.mapDistanceToFrequency(planet.distanceFromSun);\n            // Different oscillator types based on planet characteristics\n            let oscillatorType = \"sine\";\n            if (planet.distanceFromSun < 1) {\n                oscillatorType = \"triangle\"; // Inner planets: softer, warmer\n            } else if (planet.distanceFromSun > 10) {\n                oscillatorType = \"square\"; // Outer planets: more complex, alien\n            } else {\n                oscillatorType = \"sawtooth\"; // Middle planets: balanced\n            }\n            // Create basic synth using Web Audio API or Tone.js if available\n            let synth;\n            try {\n                console.log(\"\\uD83D\\uDD0D Creating synth for planet:\", planet.name);\n                // Try to use Tone.js Synth if available\n                if (Tone.Synth && typeof Tone.Synth === \"function\") {\n                    synth = new Tone.Synth({\n                        oscillator: {\n                            type: oscillatorType\n                        },\n                        envelope: {\n                            attack: this.calculateAttackTime(planet),\n                            decay: 0.1,\n                            sustain: 0.3,\n                            release: this.calculateReleaseTime(planet)\n                        }\n                    });\n                    console.log(\"✅ Tone.js Synth created successfully for planet:\", planet.name);\n                } else {\n                    // Fallback: create basic oscillator using Web Audio API\n                    console.log(\"\\uD83D\\uDD0D Tone.js Synth not available, using Web Audio API fallback...\");\n                    const audioContext = this.audioContext || new (window.AudioContext || window.webkitAudioContext)();\n                    const oscillator = audioContext.createOscillator();\n                    const gainNode = audioContext.createGain();\n                    oscillator.type = oscillatorType;\n                    oscillator.frequency.value = frequency;\n                    // Basic envelope simulation\n                    gainNode.gain.setValueAtTime(0, audioContext.currentTime);\n                    gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + this.calculateAttackTime(planet));\n                    gainNode.gain.linearRampToValueAtTime(0.1, audioContext.currentTime + this.calculateAttackTime(planet) + 0.1);\n                    oscillator.connect(gainNode);\n                    gainNode.connect(this.masterVolume);\n                    synth = {\n                        oscillator: oscillator,\n                        gainNode: gainNode,\n                        connect: (destination)=>{\n                            gainNode.connect(destination);\n                        },\n                        toDestination: ()=>{\n                            gainNode.connect(this.masterVolume);\n                        },\n                        start: (time)=>{\n                            oscillator.start(time || audioContext.currentTime);\n                        },\n                        stop: (time)=>{\n                            oscillator.stop(time || audioContext.currentTime);\n                        }\n                    };\n                    console.log(\"✅ Web Audio API fallback synth created successfully for planet:\", planet.name);\n                }\n            } catch (e) {\n                console.log(\"❌ Synth creation failed for planet:\", planet.name, e);\n                throw new Error(\"Failed to create synth for planet \".concat(planet.name, \": \").concat(e));\n            }\n            // Create tremolo effect (simplified)\n            let tremolo = null;\n            try {\n                console.log(\"\\uD83D\\uDD0D Creating tremolo for planet:\", planet.name);\n                // Try to use Tone.js Tremolo if available\n                if (Tone.Tremolo && typeof Tone.Tremolo === \"function\") {\n                    tremolo = new Tone.Tremolo({\n                        frequency: this.calculateTremoloRate(planet),\n                        depth: 0.3,\n                        type: \"sine\"\n                    });\n                    tremolo.start();\n                    console.log(\"✅ Tone.js Tremolo created successfully for planet:\", planet.name);\n                    // Connect synth -> tremolo -> master volume\n                    synth.connect(tremolo);\n                    tremolo.connect(this.masterVolume);\n                } else {\n                    console.log(\"\\uD83D\\uDD0D Tone.js Tremolo not available, skipping tremolo effect\");\n                    // Connect synth directly to master volume\n                    synth.connect(this.masterVolume);\n                }\n            } catch (e) {\n                console.log(\"❌ Tremolo creation failed for planet:\", planet.name, e);\n                // Fallback: connect synth directly to master volume\n                synth.connect(this.masterVolume);\n            }\n            // Store references\n            const synthData = {\n                synth,\n                tremolo,\n                frequency\n            };\n            this.synths.set(planet.id, synthData);\n            this.tremolos.set(planet.id, tremolo);\n            // Initialize planet state\n            this.planetStates.set(planet.id, {\n                isMuted: planet.isMuted || false,\n                volume: 0.8,\n                frequency: frequency\n            });\n            return synthData;\n        } catch (error) {\n            console.error(\"Error creating synth for planet \".concat(planet.name, \":\"), error);\n            const audioError = {\n                type: \"initialization\",\n                message: \"Error creating synth for planet \".concat(planet.name, \": \").concat(error instanceof Error ? error.message : \"Unknown error\"),\n                timestamp: Date.now(),\n                recoverable: false // Individual planet synth creation errors are not recoverable\n            };\n            this.reportError(audioError);\n            return null;\n        }\n    }\n    /**\n   * Calculate attack time based on planet's orbital velocity\n   */ calculateAttackTime(planet) {\n        const velocity = (0,_orbital_mechanics__WEBPACK_IMPORTED_MODULE_0__.calculateOrbitalVelocity)(planet);\n        return Math.max(0.05, 0.5 - velocity * 0.4); // Faster planets = quicker attack\n    }\n    /**\n   * Calculate release time based on planet's distance from sun\n   */ calculateReleaseTime(planet) {\n        return Math.max(1, planet.distanceFromSun * 0.5); // Farther planets = longer release\n    }\n    /**\n   * Calculate tremolo rate based on planet's orbital period\n   */ calculateTremoloRate(planet) {\n        // Map orbital period to tremolo frequency (slower planets = slower tremolo)\n        return Math.max(0.5, Math.min(8, 365 / planet.orbitalPeriod));\n    }\n    /**\n   * Generate musical pattern based on orbital characteristics\n   */ generatePlanetPattern(planet) {\n        const velocity = (0,_orbital_mechanics__WEBPACK_IMPORTED_MODULE_0__.calculateOrbitalVelocity)(planet);\n        const patternLength = Math.max(4, Math.min(16, Math.floor(planet.orbitalPeriod / 50)));\n        const pattern = [];\n        for(let i = 0; i < patternLength; i++){\n            // Create rhythm based on orbital characteristics\n            if (velocity > 0.4) {\n                // Fast planets: more frequent notes\n                pattern.push(i % 2 === 0 ? 1 : 0);\n            } else if (velocity > 0.2) {\n                // Medium planets: moderate rhythm\n                pattern.push(i % 3 === 0 ? 1 : i % 3 === 1 ? 0.5 : 0);\n            } else {\n                // Slow planets: sparse notes\n                pattern.push(i % 4 === 0 ? 1 : 0);\n            }\n        }\n        return pattern;\n    }\n    /**\n   * Initialize all planets for audio playback\n   */ async initializePlanets(planets) {\n        try {\n            if (!this.isInitialized) {\n                await this.initialize();\n            }\n            let successCount = 0;\n            planets.forEach((planet)=>{\n                const synth = this.createPlanetSynth(planet);\n                if (synth) {\n                    successCount++;\n                }\n            });\n            if (successCount === 0) {\n                throw new Error(\"Failed to initialize any planet synths\");\n            }\n            console.log(\"\\uD83E\\uDE90 \".concat(successCount, \"/\").concat(planets.length, \" planets initialized for audio playback\"));\n        } catch (error) {\n            console.error(\"Error initializing planets:\", error);\n            const audioError = {\n                type: \"initialization\",\n                message: \"Error initializing planets: \".concat(error instanceof Error ? error.message : \"Unknown error\"),\n                timestamp: Date.now(),\n                recoverable: true\n            };\n            this.reportError(audioError);\n            // Attempt recovery\n            const recovered = await this.attemptRecovery(audioError);\n            if (!recovered) {\n                throw error;\n            }\n        }\n    }\n    /**\n   * Start the celestial symphony\n   */ async start() {\n        try {\n            if (!this.isInitialized) {\n                await this.initialize();\n            }\n            // If we have a dummy audio context (audio failed to load), just update state and return\n            if (!this.audioContext && this.audioState.hasError) {\n                console.log(\"\\uD83D\\uDD24 Starting with dummy audio (no sound)\");\n                this.settings.isPlaying = true;\n                this.audioState.isPlaying = true;\n                this.updateContextState();\n                return;\n            }\n            if (!this.audioContext) {\n                throw new Error(\"Audio context not available\");\n            }\n            // Resume audio context if suspended (browser autoplay policy)\n            if (this.audioContext.state === \"suspended\") {\n                try {\n                    await this.audioContext.resume();\n                    this.updateContextState();\n                } catch (contextError) {\n                    const audioError = {\n                        type: \"context\",\n                        message: \"Failed to resume audio context: \".concat(contextError instanceof Error ? contextError.message : \"Unknown error\"),\n                        timestamp: Date.now(),\n                        recoverable: true\n                    };\n                    this.reportError(audioError);\n                    // Attempt recovery\n                    const recovered = await this.attemptRecovery(audioError);\n                    if (!recovered) {\n                        throw contextError;\n                    }\n                }\n            }\n            // Initialize planets if not already done\n            if (this.planetStates.size === 0) {\n                console.log(\"\\uD83E\\uDE90 Initializing planets for audio playback...\");\n                await this.initializePlanets(_data_planets__WEBPACK_IMPORTED_MODULE_1__.PLANETS);\n            }\n            // Start all planet loops\n            this.startPlanetLoops();\n            this.settings.isPlaying = true;\n            this.audioState.isPlaying = true;\n            this.updateContextState();\n            this.clearError(); // Clear any previous errors\n            console.log(\"\\uD83C\\uDFB5 Celestial symphony started\");\n        } catch (error) {\n            const audioError = {\n                type: \"playback\",\n                message: error instanceof Error ? error.message : \"Unknown playback error\",\n                timestamp: Date.now(),\n                recoverable: true\n            };\n            console.error(\"Failed to start audio:\", error);\n            this.reportError(audioError);\n            // Attempt recovery\n            const recovered = await this.attemptRecovery(audioError);\n            if (!recovered) {\n                throw error;\n            }\n        }\n    }\n    /**\n   * Start planet loops using Tone.Transport or Web Audio API scheduling\n   */ startPlanetLoops() {\n        // Start Transport if available and not already running\n        if (Tone && Tone.Transport) {\n            try {\n                if (Tone.Transport.state !== \"started\") {\n                    Tone.Transport.start();\n                    console.log(\"✅ Transport started successfully\");\n                }\n            } catch (e) {\n                console.log(\"❌ Transport start failed:\", e);\n            }\n        } else {\n            console.log(\"\\uD83D\\uDD0D Using Web Audio API scheduling (Tone.Transport not available)\");\n        }\n        // Schedule all planets\n        this.planetStates.forEach((state, planetId)=>{\n            if (!state.isMuted) {\n                this.schedulePlanet(planetId);\n            }\n        });\n    }\n    /**\n   * Stop planet loops using Tone.Transport or Web Audio API\n   */ stopPlanetLoops() {\n        // Stop all planet loops\n        this.loops.forEach((loop, planetId)=>{\n            if (loop) {\n                try {\n                    if (loop.dispose) {\n                        // Tone.js loop\n                        loop.dispose();\n                    } else if (loop.stop) {\n                        // Web Audio API loop\n                        loop.stop();\n                    }\n                    console.log(\"✅ Stopped loop for planet \".concat(planetId));\n                } catch (e) {\n                    console.log(\"❌ Loop stop failed for planet:\", planetId, e);\n                }\n            }\n        });\n        // Clear the loops map\n        this.loops.clear();\n        // Stop Transport if it's running\n        if (Tone && Tone.Transport) {\n            try {\n                if (Tone.Transport.state === \"started\") {\n                    Tone.Transport.stop();\n                    console.log(\"✅ Transport stopped successfully\");\n                }\n            } catch (e) {\n                console.log(\"❌ Transport stop failed:\", e);\n            }\n        }\n    }\n    /**\n   * Schedule a planet's audio events using Tone.Transport or Web Audio API\n   */ schedulePlanet(planetId) {\n        try {\n            if (!this.settings.isPlaying) return;\n            const synthData = this.synths.get(planetId);\n            const state = this.planetStates.get(planetId);\n            if (!synthData || !state || state.isMuted) return;\n            // Calculate interval based on planet's orbital period\n            const intervalMs = this.calculatePlanetInterval(planetId);\n            // Use Tone.Transport if available, otherwise use Web Audio API scheduling\n            if (Tone && Tone.Transport && synthData.synth && synthData.synth.triggerAttackRelease) {\n                // Tone.js scheduling\n                const intervalBeats = intervalMs / 1000 * (this.settings.tempo / 60); // Convert ms to beats\n                // Create a repeating loop for this planet\n                const planetLoop = new Tone.Loop((time)=>{\n                    try {\n                        // Trigger note on the Tone.js synth\n                        synthData.synth.triggerAttackRelease(synthData.frequency, \"8n\", time, state.volume * 0.3 // Velocity based on planet volume\n                        );\n                    } catch (error) {\n                        console.error(\"Error triggering Tone.js note for planet \".concat(planetId, \":\"), error);\n                    }\n                }, intervalBeats);\n                // Start the loop\n                planetLoop.start(0);\n                // Store the loop reference\n                this.loops.set(planetId, planetLoop);\n            } else if (synthData.synth && synthData.synth.oscillator && this.audioContext) {\n                // Web Audio API fallback scheduling\n                console.log(\"\\uD83D\\uDD0D Using Web Audio API scheduling for planet \".concat(planetId));\n                // Create a simple oscillator-based loop\n                const playNote = ()=>{\n                    if (!this.settings.isPlaying || state.isMuted) return;\n                    try {\n                        // Create a new oscillator for each note (simple approach)\n                        const oscillator = this.audioContext.createOscillator();\n                        const gainNode = this.audioContext.createGain();\n                        oscillator.type = synthData.synth.oscillator.type || \"sine\";\n                        oscillator.frequency.value = synthData.frequency;\n                        // Connect to master volume\n                        oscillator.connect(gainNode);\n                        gainNode.connect(this.masterVolume);\n                        // Simple envelope\n                        const now = this.audioContext.currentTime;\n                        gainNode.gain.setValueAtTime(0, now);\n                        gainNode.gain.linearRampToValueAtTime(state.volume * 0.3, now + 0.1); // Attack\n                        gainNode.gain.linearRampToValueAtTime(0, now + 0.3); // Release\n                        // Start and stop the oscillator\n                        oscillator.start(now);\n                        oscillator.stop(now + 0.3);\n                        // Schedule next note\n                        if (this.settings.isPlaying && !state.isMuted) {\n                            setTimeout(playNote, intervalMs);\n                        }\n                    } catch (error) {\n                        console.error(\"Error playing Web Audio API note for planet \".concat(planetId, \":\"), error);\n                    }\n                };\n                // Start playing\n                playNote();\n                // Store a reference to the play function for cleanup\n                this.loops.set(planetId, {\n                    stop: ()=>{\n                        // The loop will stop itself when isPlaying becomes false\n                        console.log(\"\\uD83D\\uDD0D Stopped Web Audio API loop for planet \".concat(planetId));\n                    }\n                });\n            } else {\n                console.log(\"⚠️ No valid synth available for planet \".concat(planetId));\n            }\n        } catch (error) {\n            console.error(\"Error scheduling planet \".concat(planetId, \":\"), error);\n            const audioError = {\n                type: \"playback\",\n                message: \"Error scheduling planet \".concat(planetId, \": \").concat(error instanceof Error ? error.message : \"Unknown error\"),\n                timestamp: Date.now(),\n                recoverable: false\n            };\n            this.reportError(audioError);\n        }\n    }\n    /**\n   * Calculate planet interval based on orbital period\n   */ calculatePlanetInterval(planetId) {\n        // This should be based on the planet's orbital period\n        // For now, use a simple mapping\n        const baseInterval = 2000; // 2 seconds\n        const planetMultipliers = {\n            \"mercury\": 0.5,\n            \"venus\": 0.8,\n            \"earth\": 1.0,\n            \"mars\": 1.5,\n            \"jupiter\": 2.0,\n            \"saturn\": 2.5,\n            \"uranus\": 3.0,\n            \"neptune\": 3.5\n        };\n        const multiplier = planetMultipliers[planetId.toLowerCase()] || 1.0;\n        return baseInterval * multiplier / (this.settings.tempo / 120);\n    }\n    /**\n   * Stop the celestial symphony\n   */ stop() {\n        try {\n            // If we have dummy audio (audio failed to load), just update state and return\n            if (!this.audioContext && this.audioState.hasError) {\n                console.log(\"\\uD83D\\uDD24 Stopping dummy audio (no sound)\");\n                this.settings.isPlaying = false;\n                this.audioState.isPlaying = false;\n                this.updateContextState();\n                return;\n            }\n            // Stop all planet loops\n            this.stopPlanetLoops();\n            // Stop all oscillators\n            this.synths.forEach((synth, planetId)=>{\n                try {\n                    if (synth && synth.oscillator && this.audioContext) {\n                        synth.gainNode.gain.setValueAtTime(0, this.audioContext.currentTime);\n                    }\n                } catch (error) {\n                    console.error(\"Error stopping synth for planet \".concat(planetId, \":\"), error);\n                }\n            });\n            this.settings.isPlaying = false;\n            this.audioState.isPlaying = false;\n            this.updateContextState();\n            console.log(\"\\uD83D\\uDD07 Celestial symphony stopped\");\n        } catch (error) {\n            const audioError = {\n                type: \"playback\",\n                message: error instanceof Error ? error.message : \"Unknown error stopping playback\",\n                timestamp: Date.now(),\n                recoverable: false // Stopping should not be recoverable as it's a user action\n            };\n            console.error(\"Error stopping audio:\", error);\n            this.reportError(audioError);\n        }\n    }\n    /**\n   * Set master volume (0.0 to 1.0)\n   */ setMasterVolume(volume) {\n        try {\n            this.settings.volume = Math.max(0, Math.min(1, volume));\n            if (this.masterVolume) {\n                // Convert linear volume to gain (0-1 range)\n                this.masterVolume.gain.value = this.settings.volume * 0.5;\n            }\n        } catch (error) {\n            console.error(\"Error setting master volume:\", error);\n            const audioError = {\n                type: \"playback\",\n                message: \"Error setting master volume: \".concat(error instanceof Error ? error.message : \"Unknown error\"),\n                timestamp: Date.now(),\n                recoverable: false // Volume control errors are not critical\n            };\n            this.reportError(audioError);\n        }\n    }\n    /**\n   * Set tempo (BPM)\n   */ setTempo(bpm) {\n        try {\n            this.settings.tempo = Math.max(60, Math.min(180, bpm));\n            // Tempo affects the scheduling intervals, restart loops if playing\n            if (this.settings.isPlaying) {\n                this.stopPlanetLoops();\n                this.startPlanetLoops();\n            }\n        } catch (error) {\n            console.error(\"Error setting tempo:\", error);\n            const audioError = {\n                type: \"playback\",\n                message: \"Error setting tempo: \".concat(error instanceof Error ? error.message : \"Unknown error\"),\n                timestamp: Date.now(),\n                recoverable: false // Tempo control errors are not critical\n            };\n            this.reportError(audioError);\n        }\n    }\n    /**\n   * Set time multiplier for orbital speed\n   */ setTimeMultiplier(multiplier) {\n        try {\n            this.timeMultiplier = Math.max(1, Math.min(10000, multiplier));\n            // Restart loops with new timing\n            if (this.settings.isPlaying) {\n                this.stopPlanetLoops();\n                this.startPlanetLoops();\n            }\n        } catch (error) {\n            console.error(\"Error setting time multiplier:\", error);\n            const audioError = {\n                type: \"playback\",\n                message: \"Error setting time multiplier: \".concat(error instanceof Error ? error.message : \"Unknown error\"),\n                timestamp: Date.now(),\n                recoverable: false // Time multiplier errors are not critical\n            };\n            this.reportError(audioError);\n        }\n    }\n    /**\n   * Set mute state for a specific planet\n   */ setPlanetMute(planetId, isMuted) {\n        try {\n            const planetState = this.planetStates.get(planetId);\n            if (planetState) {\n                planetState.isMuted = isMuted;\n                if (isMuted) {\n                    // Stop the planet's audio\n                    const synth = this.synths.get(planetId);\n                    if (synth && synth.gainNode && this.audioContext) {\n                        synth.gainNode.gain.setValueAtTime(0, this.audioContext.currentTime);\n                    }\n                } else if (this.settings.isPlaying) {\n                    // Start the planet's audio if currently playing\n                    this.schedulePlanet(planetId);\n                }\n                console.log(\"\".concat(planetId, \" \").concat(isMuted ? \"muted\" : \"unmuted\"));\n            }\n        } catch (error) {\n            console.error(\"Error setting mute state for planet \".concat(planetId, \":\"), error);\n            const audioError = {\n                type: \"playback\",\n                message: \"Error setting mute state for planet \".concat(planetId, \": \").concat(error instanceof Error ? error.message : \"Unknown error\"),\n                timestamp: Date.now(),\n                recoverable: false // Planet mute errors are not critical\n            };\n            this.reportError(audioError);\n        }\n    }\n    /**\n   * Toggle mute state for a specific planet\n   */ togglePlanetMute(planetId) {\n        const planetState = this.planetStates.get(planetId);\n        if (planetState) {\n            this.setPlanetMute(planetId, !planetState.isMuted);\n        }\n    }\n    /**\n   * Set individual planet volume\n   */ setPlanetVolume(planetId, volume) {\n        try {\n            const planetState = this.planetStates.get(planetId);\n            if (planetState) {\n                planetState.volume = Math.max(0, Math.min(1, volume));\n            }\n        } catch (error) {\n            console.error(\"Error setting volume for planet \".concat(planetId, \":\"), error);\n            const audioError = {\n                type: \"playback\",\n                message: \"Error setting volume for planet \".concat(planetId, \": \").concat(error instanceof Error ? error.message : \"Unknown error\"),\n                timestamp: Date.now(),\n                recoverable: false // Planet volume errors are not critical\n            };\n            this.reportError(audioError);\n        }\n    }\n    /**\n   * Get current audio settings\n   */ getSettings() {\n        return {\n            ...this.settings\n        };\n    }\n    /**\n   * Get planet audio state\n   */ getPlanetState(planetId) {\n        return this.planetStates.get(planetId) || null;\n    }\n    /**\n   * Report an error to all registered error callbacks\n   */ reportError(error) {\n        this.audioState.hasError = true;\n        this.audioState.error = error;\n        // Notify all error callbacks\n        this.errorCallbacks.forEach((callback)=>{\n            try {\n                callback(error);\n            } catch (callbackError) {\n                console.error(\"Error in error callback:\", callbackError);\n            }\n        });\n        // Also notify state change callbacks\n        this.notifyStateChange();\n    }\n    /**\n   * Notify all state change callbacks of current audio state\n   */ notifyStateChange() {\n        this.stateChangeCallbacks.forEach((callback)=>{\n            try {\n                callback({\n                    ...this.audioState\n                });\n            } catch (callbackError) {\n                console.error(\"Error in state change callback:\", callbackError);\n            }\n        });\n    }\n    /**\n   * Update audio context state\n   */ updateContextState() {\n        if (this.audioContext) {\n            this.audioState.contextState = this.audioContext.state;\n        } else {\n            this.audioState.contextState = \"unknown\";\n        }\n        this.notifyStateChange();\n    }\n    /**\n   * Attempt to recover from an error\n   */ async attemptRecovery(error) {\n        if (!error.recoverable || this.retryCount >= this.maxRetries) {\n            return false;\n        }\n        this.retryCount++;\n        console.log(\"Attempting recovery (\".concat(this.retryCount, \"/\").concat(this.maxRetries, \") for error: \").concat(error.message));\n        try {\n            switch(error.type){\n                case \"context\":\n                    // Try to resume audio context\n                    if (this.audioContext && this.audioContext.state === \"suspended\") {\n                        await this.audioContext.resume();\n                        this.updateContextState();\n                        return true;\n                    }\n                    break;\n                case \"initialization\":\n                    // Try to reinitialize\n                    await this.initialize();\n                    return true;\n                case \"playback\":\n                    // Try to restart playback\n                    if (this.settings.isPlaying) {\n                        await this.start();\n                        return true;\n                    }\n                    break;\n                default:\n                    // For unknown errors, try a full reinitialization\n                    this.dispose();\n                    await this.initialize();\n                    return true;\n            }\n        } catch (recoveryError) {\n            console.error(\"Recovery attempt failed:\", recoveryError);\n            // Report recovery error\n            this.reportError({\n                type: \"unknown\",\n                message: \"Recovery failed: \".concat(recoveryError instanceof Error ? recoveryError.message : \"Unknown error\"),\n                timestamp: Date.now(),\n                recoverable: false\n            });\n        }\n        return false;\n    }\n    /**\n   * Add error callback\n   */ onError(callback) {\n        this.errorCallbacks.add(callback);\n    }\n    /**\n   * Remove error callback\n   */ offError(callback) {\n        this.errorCallbacks.delete(callback);\n    }\n    /**\n   * Add state change callback\n   */ onStateChange(callback) {\n        this.stateChangeCallbacks.add(callback);\n    }\n    /**\n   * Remove state change callback\n   */ offStateChange(callback) {\n        this.stateChangeCallbacks.delete(callback);\n    }\n    /**\n   * Get current audio state\n   */ getAudioState() {\n        return {\n            ...this.audioState\n        };\n    }\n    /**\n   * Clear any current error state\n   */ clearError() {\n        this.audioState.hasError = false;\n        this.audioState.error = null;\n        this.retryCount = 0;\n        this.notifyStateChange();\n    }\n    /**\n   * Clean up all audio resources\n   */ dispose() {\n        this.stop();\n        // Stop and disconnect all oscillators\n        this.synths.forEach((synth, planetId)=>{\n            try {\n                if (synth && synth.oscillator) {\n                    synth.oscillator.stop();\n                    synth.oscillator.disconnect();\n                    synth.gainNode.disconnect();\n                    if (synth.tremoloOscillator) {\n                        synth.tremoloOscillator.stop();\n                        synth.tremoloOscillator.disconnect();\n                    }\n                    if (synth.tremoloGain) {\n                        synth.tremoloGain.disconnect();\n                    }\n                }\n            } catch (error) {\n                console.error(\"Error disposing synth for planet \".concat(planetId, \":\"), error);\n            }\n        });\n        // Clear all maps\n        this.synths.clear();\n        this.loops.clear();\n        this.tremolos.clear();\n        this.planetStates.clear();\n        this.scheduledEvents.clear();\n        // Disconnect master effects\n        try {\n            if (this.masterVolume) this.masterVolume.disconnect();\n            if (this.compressor) this.compressor.disconnect();\n            if (this.eq3) {\n                this.eq3.low.disconnect();\n                this.eq3.mid.disconnect();\n                this.eq3.high.disconnect();\n            }\n            if (this.limiter) this.limiter.disconnect();\n        } catch (error) {\n            console.error(\"Error disconnecting master effects:\", error);\n        }\n        // Close audio context\n        if (this.audioContext) {\n            try {\n                this.audioContext.close();\n            } catch (error) {\n                console.error(\"Error closing audio context:\", error);\n            }\n            this.audioContext = null;\n        }\n        this.isInitialized = false;\n        this.audioState.isInitialized = false;\n        this.audioState.isPlaying = false;\n        this.updateContextState();\n        console.log(\"\\uD83E\\uDDF9 Audio engine disposed\");\n    }\n    // Calculate frequency based on planet distance from sun\n    calculateFrequency(planet) {\n        // Map planet distance to frequency (closer planets = higher frequency)\n        // Using logarithmic scaling for better musical distribution\n        const minFreq = 110; // A2\n        const maxFreq = 880; // A5\n        const logMin = Math.log(0.4); // Mercury distance\n        const logMax = Math.log(30); // Neptune distance\n        const normalizedDistance = (Math.log(planet.distanceFromSun) - logMin) / (logMax - logMin);\n        const frequency = maxFreq - normalizedDistance * (maxFreq - minFreq);\n        return Math.max(minFreq, Math.min(maxFreq, frequency));\n    }\n    constructor(){\n        this.synths = new Map();\n        this.loops = new Map();\n        this.tremolos = new Map();\n        this.isInitialized = false;\n        this.planetStates = new Map();\n        this.timeMultiplier = 1000;\n        this.settings = {\n            isPlaying: false,\n            volume: 0.7,\n            tempo: 120\n        };\n        // Create master effects chain - will be initialized in initialize() method\n        this.masterVolume = null;\n        this.reverb = null;\n        this.compressor = null;\n        this.eq3 = null;\n        this.limiter = null;\n        this.audioContext = null;\n        this.scheduledEvents = new Set();\n        // Initialize error handling\n        this.audioState = {\n            isInitialized: false,\n            isPlaying: false,\n            hasError: false,\n            error: null,\n            contextState: \"unknown\"\n        };\n        this.errorCallbacks = new Set();\n        this.stateChangeCallbacks = new Set();\n        this.maxRetries = 3;\n        this.retryCount = 0;\n    }\n}\n// Singleton instance\nlet audioEngine = null;\nfunction getAudioEngine() {\n    if (!audioEngine) {\n        audioEngine = new CelestialAudioEngine();\n    }\n    return audioEngine;\n}\nfunction resetAudioEngine() {\n    if (audioEngine) {\n        audioEngine.dispose();\n        audioEngine = null;\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvYXVkaW9FbmdpbmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDK0Q7QUFDdEI7QUFFekMsdUNBQXVDO0FBQ3ZDLElBQUlFO0FBNkJHLE1BQU1DO0lBa0VYOztHQUVDLEdBQ0RDLGlCQUFpQkMsT0FBWSxFQUFRO1FBQ25DSCxPQUFPRztRQUNQQyxRQUFRQyxHQUFHLENBQUM7UUFDWixJQUFJTCxLQUFLTSxPQUFPLEVBQUU7WUFDaEJGLFFBQVFDLEdBQUcsQ0FBQyxpQ0FBdUJMLEtBQUtNLE9BQU87UUFDakQ7SUFDRjtJQUVBLE1BQU1DLGFBQTRCO1FBQ2hDLElBQUksSUFBSSxDQUFDQyxhQUFhLEVBQUU7UUFFeEIsSUFBSTtZQUNGSixRQUFRQyxHQUFHLENBQUM7WUFFWiw0REFBNEQ7WUFDNUQsSUFBSSxDQUFDTCxNQUFNO2dCQUNUSSxRQUFRQyxHQUFHLENBQUM7Z0JBRVosMENBQTBDO2dCQUMxQ0QsUUFBUUMsR0FBRyxDQUFDO2dCQUVaLHNDQUFzQztnQkFDdEMsSUFBSTtvQkFDRkQsUUFBUUMsR0FBRyxDQUFDO29CQUVaLDhEQUE4RDtvQkFDOUQsSUFBSUk7b0JBQ0osSUFBSTt3QkFDRkEsYUFBYSxNQUFNLG9OQUFPO3dCQUMxQkwsUUFBUUMsR0FBRyxDQUFDO3dCQUNaRCxRQUFRQyxHQUFHLENBQUMsNkJBQW1CSyxPQUFPQyxJQUFJLENBQUNGO29CQUM3QyxFQUFFLE9BQU9HLGFBQWE7d0JBQ3BCUixRQUFRUyxLQUFLLENBQUMsa0NBQWtDRDt3QkFDaEQsZ0NBQWdDO3dCQUNoQ1IsUUFBUUMsR0FBRyxDQUFDO3dCQUNaSSxhQUFhLE1BQU0sK05BQU87d0JBQzFCTCxRQUFRQyxHQUFHLENBQUM7b0JBQ2Q7b0JBRUEsaUNBQWlDO29CQUNqQ0wsT0FBT1M7b0JBRVAsdUNBQXVDO29CQUN2Q0wsUUFBUUMsR0FBRyxDQUFDO29CQUNaRCxRQUFRQyxHQUFHLENBQUMsaUNBQXVCLE9BQU9MLEtBQUtjLEtBQUs7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SUFBSSxDQUFDRCxhQUFhO1FBQ2hCQSxjQUFjLElBQUluTTtJQUNwQjtJQUNBLE9BQU9tTTtBQUNUO0FBRU8sU0FBU0U7SUFDZCxJQUFJRixhQUFhO1FBQ2ZBLFlBQVl0RCxPQUFPO1FBQ25Cc0QsY0FBYztJQUNoQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9saWIvYXVkaW9FbmdpbmUudHM/YmRiZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQbGFuZXQgfSBmcm9tICdAL2RhdGEvcGxhbmV0cyc7XG5pbXBvcnQgeyBjYWxjdWxhdGVPcmJpdGFsVmVsb2NpdHkgfSBmcm9tICcuL29yYml0YWwtbWVjaGFuaWNzJztcbmltcG9ydCB7IFBMQU5FVFMgfSBmcm9tICdAL2RhdGEvcGxhbmV0cyc7XG5cbi8vIFRvbmUuanMgd2lsbCBiZSBpbXBvcnRlZCBkeW5hbWljYWxseVxubGV0IFRvbmU6IGFueTtcblxuZXhwb3J0IGludGVyZmFjZSBBdWRpb1NldHRpbmdzIHtcbiAgaXNQbGF5aW5nOiBib29sZWFuO1xuICB2b2x1bWU6IG51bWJlcjtcbiAgdGVtcG86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQbGFuZXRBdWRpb1N0YXRlIHtcbiAgaXNNdXRlZDogYm9vbGVhbjtcbiAgdm9sdW1lOiBudW1iZXI7XG4gIGZyZXF1ZW5jeTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEF1ZGlvRXJyb3Ige1xuICB0eXBlOiAnaW5pdGlhbGl6YXRpb24nIHwgJ3BsYXliYWNrJyB8ICdjb250ZXh0JyB8ICduZXR3b3JrJyB8ICd1bmtub3duJztcbiAgbWVzc2FnZTogc3RyaW5nO1xuICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgcmVjb3ZlcmFibGU6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXVkaW9TdGF0ZSB7XG4gIGlzSW5pdGlhbGl6ZWQ6IGJvb2xlYW47XG4gIGlzUGxheWluZzogYm9vbGVhbjtcbiAgaGFzRXJyb3I6IGJvb2xlYW47XG4gIGVycm9yOiBBdWRpb0Vycm9yIHwgbnVsbDtcbiAgY29udGV4dFN0YXRlOiAnY2xvc2VkJyB8ICdydW5uaW5nJyB8ICdzdXNwZW5kZWQnIHwgJ3Vua25vd24nO1xufVxuXG5leHBvcnQgY2xhc3MgQ2VsZXN0aWFsQXVkaW9FbmdpbmUge1xuICBwcml2YXRlIHN5bnRoczogTWFwPHN0cmluZywgYW55PjtcbiAgcHJpdmF0ZSBsb29wczogTWFwPHN0cmluZywgYW55PjtcbiAgcHJpdmF0ZSB0cmVtb2xvczogTWFwPHN0cmluZywgYW55PjtcbiAgcHJpdmF0ZSBpc0luaXRpYWxpemVkOiBib29sZWFuO1xuICBwcml2YXRlIG1hc3RlclZvbHVtZTogYW55O1xuICBwcml2YXRlIHJldmVyYjogYW55O1xuICBwcml2YXRlIGNvbXByZXNzb3I6IGFueTtcbiAgcHJpdmF0ZSBlcTM6IGFueTtcbiAgcHJpdmF0ZSBsaW1pdGVyOiBhbnk7XG4gIHByaXZhdGUgYXVkaW9Db250ZXh0OiBhbnk7XG4gIHByaXZhdGUgc2NoZWR1bGVkRXZlbnRzOiBTZXQ8Tm9kZUpTLlRpbWVvdXQ+O1xuICBwcml2YXRlIHBsYW5ldFN0YXRlczogTWFwPHN0cmluZywgUGxhbmV0QXVkaW9TdGF0ZT47XG4gIHByaXZhdGUgc2V0dGluZ3M6IEF1ZGlvU2V0dGluZ3M7XG4gIHByaXZhdGUgdGltZU11bHRpcGxpZXI6IG51bWJlcjtcbiAgcHJpdmF0ZSBhdWRpb1N0YXRlOiBBdWRpb1N0YXRlO1xuICBwcml2YXRlIGVycm9yQ2FsbGJhY2tzOiBTZXQ8KGVycm9yOiBBdWRpb0Vycm9yKSA9PiB2b2lkPjtcbiAgXG4gIC8vIFRvbmUuanMgY29uc3RydWN0b3IgcmVmZXJlbmNlc1xuICBwcml2YXRlIFZvbHVtZUNvbnN0cnVjdG9yOiBhbnk7XG4gIHByaXZhdGUgUmV2ZXJiQ29uc3RydWN0b3I6IGFueTtcbiAgcHJpdmF0ZSBDb21wcmVzc29yQ29uc3RydWN0b3I6IGFueTtcbiAgcHJpdmF0ZSBFUTNDb25zdHJ1Y3RvcjogYW55O1xuICBwcml2YXRlIExpbWl0ZXJDb25zdHJ1Y3RvcjogYW55O1xuICBwcml2YXRlIFN5bnRoQ29uc3RydWN0b3I6IGFueTtcbiAgcHJpdmF0ZSBzdGF0ZUNoYW5nZUNhbGxiYWNrczogU2V0PChzdGF0ZTogQXVkaW9TdGF0ZSkgPT4gdm9pZD47XG4gIHByaXZhdGUgbWF4UmV0cmllczogbnVtYmVyO1xuICBwcml2YXRlIHJldHJ5Q291bnQ6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnN5bnRocyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmxvb3BzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMudHJlbW9sb3MgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5pc0luaXRpYWxpemVkID0gZmFsc2U7XG4gICAgdGhpcy5wbGFuZXRTdGF0ZXMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy50aW1lTXVsdGlwbGllciA9IDEwMDA7XG4gICAgXG4gICAgdGhpcy5zZXR0aW5ncyA9IHtcbiAgICAgIGlzUGxheWluZzogZmFsc2UsXG4gICAgICB2b2x1bWU6IDAuNyxcbiAgICAgIHRlbXBvOiAxMjBcbiAgICB9O1xuXG4gICAgLy8gQ3JlYXRlIG1hc3RlciBlZmZlY3RzIGNoYWluIC0gd2lsbCBiZSBpbml0aWFsaXplZCBpbiBpbml0aWFsaXplKCkgbWV0aG9kXG4gICAgdGhpcy5tYXN0ZXJWb2x1bWUgPSBudWxsO1xuICAgIHRoaXMucmV2ZXJiID0gbnVsbDtcbiAgICB0aGlzLmNvbXByZXNzb3IgPSBudWxsO1xuICAgIHRoaXMuZXEzID0gbnVsbDtcbiAgICB0aGlzLmxpbWl0ZXIgPSBudWxsO1xuICAgIHRoaXMuYXVkaW9Db250ZXh0ID0gbnVsbDtcbiAgICB0aGlzLnNjaGVkdWxlZEV2ZW50cyA9IG5ldyBTZXQoKTtcbiAgICBcbiAgICAvLyBJbml0aWFsaXplIGVycm9yIGhhbmRsaW5nXG4gICAgdGhpcy5hdWRpb1N0YXRlID0ge1xuICAgICAgaXNJbml0aWFsaXplZDogZmFsc2UsXG4gICAgICBpc1BsYXlpbmc6IGZhbHNlLFxuICAgICAgaGFzRXJyb3I6IGZhbHNlLFxuICAgICAgZXJyb3I6IG51bGwsXG4gICAgICBjb250ZXh0U3RhdGU6ICd1bmtub3duJ1xuICAgIH07XG4gICAgdGhpcy5lcnJvckNhbGxiYWNrcyA9IG5ldyBTZXQoKTtcbiAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzID0gbmV3IFNldCgpO1xuICAgIHRoaXMubWF4UmV0cmllcyA9IDM7XG4gICAgdGhpcy5yZXRyeUNvdW50ID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIFRvbmUuanMgcmVmZXJlbmNlIGZyb20gZXh0ZXJuYWwgc291cmNlXG4gICAqL1xuICBzZXRUb25lUmVmZXJlbmNlKHRvbmVSZWY6IGFueSk6IHZvaWQge1xuICAgIFRvbmUgPSB0b25lUmVmO1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIFRvbmUuanMgcmVmZXJlbmNlIHNldCBmcm9tIGV4dGVybmFsIHNvdXJjZScpO1xuICAgIGlmIChUb25lLnZlcnNpb24pIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFRvbmUuanMgdmVyc2lvbjonLCBUb25lLnZlcnNpb24pO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZCkgcmV0dXJuO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdJbml0aWFsaXppbmcgQ2VsZXN0aWFsIEF1ZGlvIEVuZ2luZSB3aXRoIFRvbmUuanMuLi4nKTtcbiAgICAgIFxuICAgICAgLy8gVXNlIFRvbmUuanMgcmVmZXJlbmNlIGlmIGFscmVhZHkgc2V0LCBvdGhlcndpc2UgaW1wb3J0IGl0XG4gICAgICBpZiAoIVRvbmUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0gTG9hZGluZyBUb25lLmpzLi4uJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBUcnkgZGlmZmVyZW50IFRvbmUuanMgaW1wb3J0IGFwcHJvYWNoZXNcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0gQXR0ZW1wdGluZyBUb25lLmpzIGltcG9ydC4uLicpO1xuICAgICAgICBcbiAgICAgICAgLy8gTWV0aG9kIDE6IFNpbXBsZSBUb25lLmpzIHYxNCBpbXBvcnRcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBBdHRlbXB0aW5nIHNpbXBsZSBUb25lLmpzIHYxNCBpbXBvcnQuLi4nKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBUcnkgdG8gaW1wb3J0IFRvbmUuanMgd2l0aCBlcnJvciBoYW5kbGluZyBmb3IgY2h1bmsgbG9hZGluZ1xuICAgICAgICAgIGxldCB0b25lTW9kdWxlO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0b25lTW9kdWxlID0gYXdhaXQgaW1wb3J0KCd0b25lJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBUb25lLmpzIG1vZHVsZSBpbXBvcnRlZCcpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflI0gTW9kdWxlIGtleXM6JywgT2JqZWN0LmtleXModG9uZU1vZHVsZSkpO1xuICAgICAgICAgIH0gY2F0Y2ggKGltcG9ydEVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgVG9uZS5qcyBjaHVuayBpbXBvcnQgZmFpbGVkOicsIGltcG9ydEVycm9yKTtcbiAgICAgICAgICAgIC8vIFRyeSBhbHRlcm5hdGl2ZSBpbXBvcnQgbWV0aG9kXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBUcnlpbmcgYWx0ZXJuYXRpdmUgVG9uZS5qcyBpbXBvcnQuLi4nKTtcbiAgICAgICAgICAgIHRvbmVNb2R1bGUgPSBhd2FpdCBpbXBvcnQoJ3RvbmUvYnVpbGQvVG9uZScpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflI0gVG9uZS5qcyBpbXBvcnRlZCB2aWEgYnVpbGQgcGF0aCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBUcnkgdG8gdXNlIHRoZSBtb2R1bGUgZGlyZWN0bHlcbiAgICAgICAgICBUb25lID0gdG9uZU1vZHVsZSBhcyBhbnk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBiYXNpYyBmdW5jdGlvbmFsaXR5XG4gICAgICAgICAgY29uc29sZS5sb2coJ/CflI0gQ2hlY2tpbmcgYmFzaWMgZnVuY3Rpb25hbGl0eS4uLicpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFRvbmUuc3RhcnQgdHlwZTonLCB0eXBlb2YgVG9uZS5zdGFydCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ/CflI0gVG9uZS5UcmFuc3BvcnQgdHlwZTonLCB0eXBlb2YgVG9uZS5UcmFuc3BvcnQpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFRyeSB0byBzdGFydCBUb25lLmpzIGNvbnRleHQgZmlyc3RcbiAgICAgICAgICBpZiAodHlwZW9mIFRvbmUuc3RhcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFN0YXJ0aW5nIFRvbmUuanMgY29udGV4dC4uLicpO1xuICAgICAgICAgICAgYXdhaXQgVG9uZS5zdGFydCgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KchSBUb25lLmpzIGNvbnRleHQgc3RhcnRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KdjCBUb25lLnN0YXJ0IGlzIG5vdCBhIGZ1bmN0aW9uJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFRvbmUuanMgaW1wb3J0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgICAgaWYgKFRvbmUudmVyc2lvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflI0gVG9uZS5qcyB2ZXJzaW9uOicsIFRvbmUudmVyc2lvbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFRvbmUuanMgdmVyc2lvbjogbm90IGF2YWlsYWJsZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBEZWJ1ZyB0aGUgY29tcGxldGUgVG9uZS5qcyBzdHJ1Y3R1cmVcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBDb21wbGV0ZSBUb25lLmpzIHN0cnVjdHVyZTonKTtcbiAgICAgICAgICBPYmplY3Qua2V5cyhUb25lKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgICAtICR7a2V5fTogJHt0eXBlb2YgVG9uZVtrZXldfWApO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBUb25lW2tleV0gPT09ICdvYmplY3QnICYmIFRvbmVba2V5XSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgICAgIFByb3BlcnRpZXM6ICR7T2JqZWN0LmtleXMoVG9uZVtrZXldKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDaGVjayBmb3IgY29tbW9uIFRvbmUuanMgdjE0IHBhdHRlcm5zXG4gICAgICAgICAgY29uc29sZS5sb2coJ/CflI0gQ2hlY2tpbmcgZm9yIFRvbmUuanMgdjE0IHBhdHRlcm5zLi4uJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUncyBhIGRlZmF1bHQgZXhwb3J0XG4gICAgICAgICAgaWYgKFRvbmUuZGVmYXVsdCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflI0gRm91bmQgZGVmYXVsdCBleHBvcnQ6JywgdHlwZW9mIFRvbmUuZGVmYXVsdCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBEZWZhdWx0IGV4cG9ydCBrZXlzOicsIE9iamVjdC5rZXlzKFRvbmUuZGVmYXVsdCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBhcmUgc3ViLW1vZHVsZXNcbiAgICAgICAgICBpZiAoVG9uZS5Db21wb25lbnQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIEZvdW5kIENvbXBvbmVudCBtb2R1bGU6JywgT2JqZWN0LmtleXMoVG9uZS5Db21wb25lbnQpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKFRvbmUuRWZmZWN0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBGb3VuZCBFZmZlY3QgbW9kdWxlOicsIE9iamVjdC5rZXlzKFRvbmUuRWZmZWN0KSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChUb25lLkluc3RydW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIEZvdW5kIEluc3RydW1lbnQgbW9kdWxlOicsIE9iamVjdC5rZXlzKFRvbmUuSW5zdHJ1bWVudCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoVG9uZS5TaWduYWwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIEZvdW5kIFNpZ25hbCBtb2R1bGU6JywgT2JqZWN0LmtleXMoVG9uZS5TaWduYWwpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVHJ5IHRvIGZpbmQgVm9sdW1lIGluIGRpZmZlcmVudCBsb2NhdGlvbnNcbiAgICAgICAgICBjb25zdCB2b2x1bWVMb2NhdGlvbnMgPSBbXG4gICAgICAgICAgICAnVm9sdW1lJyxcbiAgICAgICAgICAgICdDb21wb25lbnQuVm9sdW1lJyxcbiAgICAgICAgICAgICdFZmZlY3QuVm9sdW1lJyxcbiAgICAgICAgICAgICdTaWduYWwuVm9sdW1lJyxcbiAgICAgICAgICAgICdkZWZhdWx0LlZvbHVtZScsXG4gICAgICAgICAgICAnZGVmYXVsdC5Db21wb25lbnQuVm9sdW1lJyxcbiAgICAgICAgICAgICdkZWZhdWx0LkVmZmVjdC5Wb2x1bWUnXG4gICAgICAgICAgXTtcbiAgICAgICAgICBcbiAgICAgICAgICB2b2x1bWVMb2NhdGlvbnMuZm9yRWFjaChsb2NhdGlvbiA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGxvY2F0aW9uLnNwbGl0KCcuJyk7XG4gICAgICAgICAgICAgIGxldCBvYmogPSBUb25lO1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHMpIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqICYmIG9ialtwYXJ0XSkge1xuICAgICAgICAgICAgICAgICAgb2JqID0gb2JqW3BhcnRdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBvYmogPSBudWxsO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUgRm91bmQgVm9sdW1lIGNvbnN0cnVjdG9yIGF0OiBUb25lLiR7bG9jYXRpb259YCk7XG4gICAgICAgICAgICAgICAgdGhpcy5Wb2x1bWVDb25zdHJ1Y3RvciA9IG9iajtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSBGb3VuZCBWb2x1bWUgb2JqZWN0IGF0OiBUb25lLiR7bG9jYXRpb259YCwgT2JqZWN0LmtleXMob2JqKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgLy8gSWdub3JlIGVycm9yc1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIEFsbCBUb25lLmpzIGltcG9ydCBtZXRob2RzIGZhaWxlZDonLCBlKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBDb250aW51aW5nIHdpdGhvdXQgYXVkaW8gLSBzb2xhciBzeXN0ZW0gd2lsbCB3b3JrIGJ1dCB3aXRob3V0IHNvdW5kJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2V0IHVwIGEgZHVtbXkgYXVkaW8gZW5naW5lIHRoYXQgZG9lc24ndCBwcm9kdWNlIHNvdW5kIGJ1dCBkb2Vzbid0IGJyZWFrIHRoZSBhcHBcbiAgICAgICAgICBUb25lID0ge1xuICAgICAgICAgICAgc3RhcnQ6IGFzeW5jICgpID0+IGNvbnNvbGUubG9nKCfwn5SkIER1bW15IGF1ZGlvIHN0YXJ0IGNhbGxlZCcpLFxuICAgICAgICAgICAgVHJhbnNwb3J0OiB7XG4gICAgICAgICAgICAgIGJwbTogeyB2YWx1ZTogMTIwIH0sXG4gICAgICAgICAgICAgIHN0YXJ0OiAoKSA9PiBjb25zb2xlLmxvZygn8J+UpCBEdW1teSBUcmFuc3BvcnQgc3RhcnQgY2FsbGVkJyksXG4gICAgICAgICAgICAgIHN0b3A6ICgpID0+IGNvbnNvbGUubG9nKCfwn5SkIER1bW15IFRyYW5zcG9ydCBzdG9wIGNhbGxlZCcpLFxuICAgICAgICAgICAgICBjYW5jZWw6ICgpID0+IGNvbnNvbGUubG9nKCfwn5SkIER1bW15IFRyYW5zcG9ydCBjYW5jZWwgY2FsbGVkJylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgICAgIHJhd0NvbnRleHQ6IG51bGxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRDb250ZXh0OiAoKSA9PiAoeyByYXdDb250ZXh0OiBudWxsIH0pLFxuICAgICAgICAgICAgdmVyc2lvbjogJ2R1bW15J1xuICAgICAgICAgIH0gYXMgYW55O1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNldCBiYXNpYyBpbml0aWFsaXphdGlvbiBzdGF0ZVxuICAgICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5hdWRpb1N0YXRlID0ge1xuICAgICAgICAgICAgaXNJbml0aWFsaXplZDogdHJ1ZSxcbiAgICAgICAgICAgIGlzUGxheWluZzogZmFsc2UsXG4gICAgICAgICAgICBoYXNFcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdpbml0aWFsaXphdGlvbicsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdBdWRpbyBmYWlsZWQgdG8gbG9hZCwgY29udGludWluZyB3aXRob3V0IHNvdW5kJyxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICByZWNvdmVyYWJsZTogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb250ZXh0U3RhdGU6ICd1bmtub3duJ1xuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuOyAvLyBTa2lwIHRoZSByZXN0IG9mIGluaXRpYWxpemF0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ/CflI0gVG9uZS5qcyB2ZXJzaW9uOicsIFRvbmUudmVyc2lvbik7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBBdmFpbGFibGUgVG9uZSBjb25zdHJ1Y3RvcnM6JywgT2JqZWN0LmtleXMoVG9uZSkuZmlsdGVyKGtleSA9PiB0eXBlb2YgVG9uZVtrZXldID09PSAnZnVuY3Rpb24nKSk7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBBbGwgVG9uZSBwcm9wZXJ0aWVzOicsIE9iamVjdC5rZXlzKFRvbmUpKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFRvbmUuVm9sdW1lIHR5cGU6JywgdHlwZW9mIFRvbmUuVm9sdW1lKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFRvbmUuUmV2ZXJiIHR5cGU6JywgdHlwZW9mIFRvbmUuUmV2ZXJiKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFRvbmUuU3ludGggdHlwZTonLCB0eXBlb2YgVG9uZS5TeW50aCk7XG4gICAgICBcbiAgICAgIC8vIFN0YXJ0IHdpdGggYmFzaWMgVG9uZS5qcyBmdW5jdGlvbmFsaXR5IC0gc2tpcCBlZmZlY3RzIGZvciBub3dcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFNraXBwaW5nIGVmZmVjdHMgY3JlYXRpb24gZm9yIG5vdywgZm9jdXNpbmcgb24gYmFzaWMgZnVuY3Rpb25hbGl0eS4uLicpO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgYSBzaW1wbGUgZ2FpbiBub2RlIGFzIG1hc3RlciB2b2x1bWUgdXNpbmcgV2ViIEF1ZGlvIEFQSSBkaXJlY3RseVxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0gQ3JlYXRpbmcgYmFzaWMgZ2FpbiBub2RlIGZvciB2b2x1bWUgY29udHJvbC4uLicpO1xuICAgICAgICBsZXQgYXVkaW9Db250ZXh0O1xuICAgICAgICBcbiAgICAgICAgLy8gVHJ5IHRvIGdldCBhdWRpbyBjb250ZXh0IGZyb20gVG9uZS5qc1xuICAgICAgICBpZiAoVG9uZSAmJiBUb25lLmdldENvbnRleHQgJiYgdHlwZW9mIFRvbmUuZ2V0Q29udGV4dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGF1ZGlvQ29udGV4dCA9IFRvbmUuZ2V0Q29udGV4dCgpLnJhd0NvbnRleHQ7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBHb3QgYXVkaW8gY29udGV4dCBmcm9tIFRvbmUuanMnKTtcbiAgICAgICAgfSBlbHNlIGlmIChUb25lICYmIFRvbmUuY29udGV4dCAmJiBUb25lLmNvbnRleHQucmF3Q29udGV4dCkge1xuICAgICAgICAgIGF1ZGlvQ29udGV4dCA9IFRvbmUuY29udGV4dC5yYXdDb250ZXh0O1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgR290IGF1ZGlvIGNvbnRleHQgZnJvbSBUb25lLmNvbnRleHQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBGYWxsYmFjazogY3JlYXRlIG91ciBvd24gYXVkaW8gY29udGV4dFxuICAgICAgICAgIGF1ZGlvQ29udGV4dCA9IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fCAod2luZG93IGFzIGFueSkud2Via2l0QXVkaW9Db250ZXh0KSgpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgQ3JlYXRlZCBmYWxsYmFjayBhdWRpbyBjb250ZXh0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMubWFzdGVyVm9sdW1lID0gYXVkaW9Db250ZXh0LmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgdGhpcy5tYXN0ZXJWb2x1bWUuZ2Fpbi52YWx1ZSA9IDAuMzsgLy8gLTEwZEIgYXBwcm94aW1hdGVseVxuICAgICAgICB0aGlzLm1hc3RlclZvbHVtZS5jb25uZWN0KGF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuYXVkaW9Db250ZXh0ID0gYXVkaW9Db250ZXh0O1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIEJhc2ljIGdhaW4gbm9kZSBjcmVhdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZygn4p2MIEJhc2ljIGdhaW4gbm9kZSBjcmVhdGlvbiBmYWlsZWQ6JywgZSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBiYXNpYyBnYWluIG5vZGU6ICR7ZX1gKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU2V0IG90aGVyIGVmZmVjdHMgdG8gbnVsbCBmb3Igbm93XG4gICAgICB0aGlzLnJldmVyYiA9IG51bGw7XG4gICAgICB0aGlzLmNvbXByZXNzb3IgPSBudWxsO1xuICAgICAgdGhpcy5lcTMgPSBudWxsO1xuICAgICAgdGhpcy5saW1pdGVyID0gbnVsbDtcbiAgICAgIFxuICAgICAgLy8gTm8gZWZmZWN0cyBjaGFpbiB0byBjb25uZWN0IHNpbmNlIHdlJ3JlIHVzaW5nIGJhc2ljIGdhaW4gbm9kZSBkaXJlY3RseSBjb25uZWN0ZWQgdG8gZGVzdGluYXRpb25cbiAgICAgIFxuICAgICAgLy8gU2V0IHVwIFRyYW5zcG9ydCB3aXRoIG51bGwgY2hlY2tzXG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBTZXR0aW5nIHVwIFRyYW5zcG9ydC4uLicpO1xuICAgICAgICBpZiAoVG9uZS5UcmFuc3BvcnQgJiYgVG9uZS5UcmFuc3BvcnQuYnBtKSB7XG4gICAgICAgICAgVG9uZS5UcmFuc3BvcnQuYnBtLnZhbHVlID0gdGhpcy5zZXR0aW5ncy50ZW1wbztcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFRyYW5zcG9ydCBCUE0gc2V0IHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gVG9uZS5UcmFuc3BvcnQgbm90IGF2YWlsYWJsZSwgc2tpcHBpbmcgVHJhbnNwb3J0IHNldHVwJyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KdjCBUcmFuc3BvcnQgc2V0dXAgZmFpbGVkOicsIGUpO1xuICAgICAgICAvLyBEb24ndCB0aHJvdyBoZXJlLCBUcmFuc3BvcnQgaXMgbm90IGNyaXRpY2FsIGZvciBiYXNpYyBmdW5jdGlvbmFsaXR5XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFN0b3JlIGF1ZGlvIGNvbnRleHQgcmVmZXJlbmNlXG4gICAgICB0cnkge1xuICAgICAgICBpZiAoVG9uZS5jb250ZXh0ICYmIFRvbmUuY29udGV4dC5yYXdDb250ZXh0KSB7XG4gICAgICAgICAgdGhpcy5hdWRpb0NvbnRleHQgPSBUb25lLmNvbnRleHQucmF3Q29udGV4dDtcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIEF1ZGlvIGNvbnRleHQgcmVmZXJlbmNlIHN0b3JlZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gVG9uZS5jb250ZXh0IG5vdCBhdmFpbGFibGUsIHVzaW5nIGZhbGxiYWNrIGNvbnRleHQnKTtcbiAgICAgICAgICAvLyBXZSBhbHJlYWR5IGNyZWF0ZWQgYSBmYWxsYmFjayBjb250ZXh0IGVhcmxpZXJcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZygn4p2MIEF1ZGlvIGNvbnRleHQgcmVmZXJlbmNlIHN0b3JhZ2UgZmFpbGVkOicsIGUpO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgdGhpcy5hdWRpb1N0YXRlLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgdGhpcy51cGRhdGVDb250ZXh0U3RhdGUoKTtcbiAgICAgIHRoaXMuY2xlYXJFcnJvcigpOyAvLyBDbGVhciBhbnkgcHJldmlvdXMgZXJyb3JzXG4gICAgICBjb25zb2xlLmxvZygn8J+OtSBDZWxlc3RpYWwgQXVkaW8gRW5naW5lIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBhdWRpb0Vycm9yOiBBdWRpb0Vycm9yID0ge1xuICAgICAgICB0eXBlOiAnaW5pdGlhbGl6YXRpb24nLFxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGluaXRpYWxpemF0aW9uIGVycm9yJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICByZWNvdmVyYWJsZTogdHJ1ZVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgYXVkaW8gZW5naW5lOicsIGVycm9yKTtcbiAgICAgIHRoaXMucmVwb3J0RXJyb3IoYXVkaW9FcnJvcik7XG4gICAgICBcbiAgICAgIC8vIEF0dGVtcHQgcmVjb3ZlcnlcbiAgICAgIGNvbnN0IHJlY292ZXJlZCA9IGF3YWl0IHRoaXMuYXR0ZW1wdFJlY292ZXJ5KGF1ZGlvRXJyb3IpO1xuICAgICAgaWYgKCFyZWNvdmVyZWQpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1hcCBwbGFuZXRhcnkgZGlzdGFuY2UgdG8gZnJlcXVlbmN5IHVzaW5nIGludmVyc2UgcmVsYXRpb25zaGlwXG4gICAqIENsb3NlciBwbGFuZXRzID0gaGlnaGVyIGZyZXF1ZW5jaWVzICgyMDAtODAwSHogcmFuZ2UpXG4gICAqL1xuICBwcml2YXRlIG1hcERpc3RhbmNlVG9GcmVxdWVuY3koZGlzdGFuY2VGcm9tU3VuOiBudW1iZXIpOiBudW1iZXIge1xuICAgIC8vIEludmVyc2UgbWFwcGluZzogY2xvc2VyIHBsYW5ldHMgZ2V0IGhpZ2hlciBmcmVxdWVuY2llc1xuICAgIGNvbnN0IG1pbkRpc3RhbmNlID0gMC4zOTsgLy8gTWVyY3VyeVxuICAgIGNvbnN0IG1heERpc3RhbmNlID0gMzkuNDg7IC8vIE5lcHR1bmVcbiAgICBcbiAgICAvLyBJbnZlcnNlIHJlbGF0aW9uc2hpcCB3aXRoIHNvbWUgbG9nYXJpdGhtaWMgc2NhbGluZ1xuICAgIGNvbnN0IG5vcm1hbGl6ZWREaXN0YW5jZSA9IChkaXN0YW5jZUZyb21TdW4gLSBtaW5EaXN0YW5jZSkgLyAobWF4RGlzdGFuY2UgLSBtaW5EaXN0YW5jZSk7XG4gICAgY29uc3QgaW52ZXJzZUZhY3RvciA9IDEgLSBub3JtYWxpemVkRGlzdGFuY2U7XG4gICAgXG4gICAgLy8gTWFwIHRvIGZyZXF1ZW5jeSByYW5nZSAoMjAwSHogdG8gODAwSHopXG4gICAgY29uc3QgbWluRnJlcSA9IDIwMDtcbiAgICBjb25zdCBtYXhGcmVxID0gODAwO1xuICAgIFxuICAgIC8vIEFwcGx5IGxvZ2FyaXRobWljIHNjYWxpbmcgZm9yIG1vcmUgbXVzaWNhbCByZXN1bHRzXG4gICAgY29uc3QgZnJlcXVlbmN5ID0gbWluRnJlcSArIChtYXhGcmVxIC0gbWluRnJlcSkgKiBNYXRoLnBvdyhpbnZlcnNlRmFjdG9yLCAwLjcpO1xuICAgIFxuICAgIHJldHVybiBNYXRoLnJvdW5kKGZyZXF1ZW5jeSAqIDEwMCkgLyAxMDA7IC8vIFJvdW5kIHRvIDIgZGVjaW1hbCBwbGFjZXNcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSB1bmlxdWUgc3ludGggZm9yIGVhY2ggcGxhbmV0IHdpdGggY2VsZXN0aWFsIGNoYXJhY3RlcmlzdGljc1xuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVQbGFuZXRTeW50aChwbGFuZXQ6IFBsYW5ldCk6IGFueSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghVG9uZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RvbmUuanMgaXMgbm90IGF2YWlsYWJsZScpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBmcmVxdWVuY3kgPSB0aGlzLm1hcERpc3RhbmNlVG9GcmVxdWVuY3kocGxhbmV0LmRpc3RhbmNlRnJvbVN1bik7XG4gICAgICBcbiAgICAgIC8vIERpZmZlcmVudCBvc2NpbGxhdG9yIHR5cGVzIGJhc2VkIG9uIHBsYW5ldCBjaGFyYWN0ZXJpc3RpY3NcbiAgICAgIGxldCBvc2NpbGxhdG9yVHlwZTogYW55ID0gJ3NpbmUnO1xuICAgICAgaWYgKHBsYW5ldC5kaXN0YW5jZUZyb21TdW4gPCAxKSB7XG4gICAgICAgIG9zY2lsbGF0b3JUeXBlID0gJ3RyaWFuZ2xlJzsgLy8gSW5uZXIgcGxhbmV0czogc29mdGVyLCB3YXJtZXJcbiAgICAgIH0gZWxzZSBpZiAocGxhbmV0LmRpc3RhbmNlRnJvbVN1biA+IDEwKSB7XG4gICAgICAgIG9zY2lsbGF0b3JUeXBlID0gJ3NxdWFyZSc7IC8vIE91dGVyIHBsYW5ldHM6IG1vcmUgY29tcGxleCwgYWxpZW5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9zY2lsbGF0b3JUeXBlID0gJ3Nhd3Rvb3RoJzsgLy8gTWlkZGxlIHBsYW5ldHM6IGJhbGFuY2VkXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBiYXNpYyBzeW50aCB1c2luZyBXZWIgQXVkaW8gQVBJIG9yIFRvbmUuanMgaWYgYXZhaWxhYmxlXG4gICAgICBsZXQgc3ludGg7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBDcmVhdGluZyBzeW50aCBmb3IgcGxhbmV0OicsIHBsYW5ldC5uYW1lKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRyeSB0byB1c2UgVG9uZS5qcyBTeW50aCBpZiBhdmFpbGFibGVcbiAgICAgICAgaWYgKFRvbmUuU3ludGggJiYgdHlwZW9mIFRvbmUuU3ludGggPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBzeW50aCA9IG5ldyBUb25lLlN5bnRoKHtcbiAgICAgICAgICAgIG9zY2lsbGF0b3I6IHtcbiAgICAgICAgICAgICAgdHlwZTogb3NjaWxsYXRvclR5cGVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnZlbG9wZToge1xuICAgICAgICAgICAgICBhdHRhY2s6IHRoaXMuY2FsY3VsYXRlQXR0YWNrVGltZShwbGFuZXQpLFxuICAgICAgICAgICAgICBkZWNheTogMC4xLFxuICAgICAgICAgICAgICBzdXN0YWluOiAwLjMsXG4gICAgICAgICAgICAgIHJlbGVhc2U6IHRoaXMuY2FsY3VsYXRlUmVsZWFzZVRpbWUocGxhbmV0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgVG9uZS5qcyBTeW50aCBjcmVhdGVkIHN1Y2Nlc3NmdWxseSBmb3IgcGxhbmV0OicsIHBsYW5ldC5uYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBGYWxsYmFjazogY3JlYXRlIGJhc2ljIG9zY2lsbGF0b3IgdXNpbmcgV2ViIEF1ZGlvIEFQSVxuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFRvbmUuanMgU3ludGggbm90IGF2YWlsYWJsZSwgdXNpbmcgV2ViIEF1ZGlvIEFQSSBmYWxsYmFjay4uLicpO1xuICAgICAgICAgIGNvbnN0IGF1ZGlvQ29udGV4dCA9IHRoaXMuYXVkaW9Db250ZXh0IHx8IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fCAod2luZG93IGFzIGFueSkud2Via2l0QXVkaW9Db250ZXh0KSgpO1xuICAgICAgICAgIGNvbnN0IG9zY2lsbGF0b3IgPSBhdWRpb0NvbnRleHQuY3JlYXRlT3NjaWxsYXRvcigpO1xuICAgICAgICAgIGNvbnN0IGdhaW5Ob2RlID0gYXVkaW9Db250ZXh0LmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgICBcbiAgICAgICAgICBvc2NpbGxhdG9yLnR5cGUgPSBvc2NpbGxhdG9yVHlwZTtcbiAgICAgICAgICBvc2NpbGxhdG9yLmZyZXF1ZW5jeS52YWx1ZSA9IGZyZXF1ZW5jeTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBCYXNpYyBlbnZlbG9wZSBzaW11bGF0aW9uXG4gICAgICAgICAgZ2Fpbk5vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSgwLCBhdWRpb0NvbnRleHQuY3VycmVudFRpbWUpO1xuICAgICAgICAgIGdhaW5Ob2RlLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMC4zLCBhdWRpb0NvbnRleHQuY3VycmVudFRpbWUgKyB0aGlzLmNhbGN1bGF0ZUF0dGFja1RpbWUocGxhbmV0KSk7XG4gICAgICAgICAgZ2Fpbk5vZGUuZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgwLjEsIGF1ZGlvQ29udGV4dC5jdXJyZW50VGltZSArIHRoaXMuY2FsY3VsYXRlQXR0YWNrVGltZShwbGFuZXQpICsgMC4xKTtcbiAgICAgICAgICBcbiAgICAgICAgICBvc2NpbGxhdG9yLmNvbm5lY3QoZ2Fpbk5vZGUpO1xuICAgICAgICAgIGdhaW5Ob2RlLmNvbm5lY3QodGhpcy5tYXN0ZXJWb2x1bWUpO1xuICAgICAgICAgIFxuICAgICAgICAgIHN5bnRoID0ge1xuICAgICAgICAgICAgb3NjaWxsYXRvcjogb3NjaWxsYXRvcixcbiAgICAgICAgICAgIGdhaW5Ob2RlOiBnYWluTm9kZSxcbiAgICAgICAgICAgIGNvbm5lY3Q6IChkZXN0aW5hdGlvbjogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGdhaW5Ob2RlLmNvbm5lY3QoZGVzdGluYXRpb24pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvRGVzdGluYXRpb246ICgpID0+IHtcbiAgICAgICAgICAgICAgZ2Fpbk5vZGUuY29ubmVjdCh0aGlzLm1hc3RlclZvbHVtZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RhcnQ6ICh0aW1lPzogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgIG9zY2lsbGF0b3Iuc3RhcnQodGltZSB8fCBhdWRpb0NvbnRleHQuY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0b3A6ICh0aW1lPzogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgIG9zY2lsbGF0b3Iuc3RvcCh0aW1lIHx8IGF1ZGlvQ29udGV4dC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFdlYiBBdWRpbyBBUEkgZmFsbGJhY2sgc3ludGggY3JlYXRlZCBzdWNjZXNzZnVsbHkgZm9yIHBsYW5ldDonLCBwbGFuZXQubmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KdjCBTeW50aCBjcmVhdGlvbiBmYWlsZWQgZm9yIHBsYW5ldDonLCBwbGFuZXQubmFtZSwgZSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBzeW50aCBmb3IgcGxhbmV0ICR7cGxhbmV0Lm5hbWV9OiAke2V9YCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSB0cmVtb2xvIGVmZmVjdCAoc2ltcGxpZmllZClcbiAgICAgIGxldCB0cmVtb2xvID0gbnVsbDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIENyZWF0aW5nIHRyZW1vbG8gZm9yIHBsYW5ldDonLCBwbGFuZXQubmFtZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBUcnkgdG8gdXNlIFRvbmUuanMgVHJlbW9sbyBpZiBhdmFpbGFibGVcbiAgICAgICAgaWYgKFRvbmUuVHJlbW9sbyAmJiB0eXBlb2YgVG9uZS5UcmVtb2xvID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdHJlbW9sbyA9IG5ldyBUb25lLlRyZW1vbG8oe1xuICAgICAgICAgICAgZnJlcXVlbmN5OiB0aGlzLmNhbGN1bGF0ZVRyZW1vbG9SYXRlKHBsYW5ldCksXG4gICAgICAgICAgICBkZXB0aDogMC4zLFxuICAgICAgICAgICAgdHlwZTogJ3NpbmUnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdHJlbW9sby5zdGFydCgpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgVG9uZS5qcyBUcmVtb2xvIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IGZvciBwbGFuZXQ6JywgcGxhbmV0Lm5hbWUpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENvbm5lY3Qgc3ludGggLT4gdHJlbW9sbyAtPiBtYXN0ZXIgdm9sdW1lXG4gICAgICAgICAgc3ludGguY29ubmVjdCh0cmVtb2xvKTtcbiAgICAgICAgICB0cmVtb2xvLmNvbm5lY3QodGhpcy5tYXN0ZXJWb2x1bWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFRvbmUuanMgVHJlbW9sbyBub3QgYXZhaWxhYmxlLCBza2lwcGluZyB0cmVtb2xvIGVmZmVjdCcpO1xuICAgICAgICAgIC8vIENvbm5lY3Qgc3ludGggZGlyZWN0bHkgdG8gbWFzdGVyIHZvbHVtZVxuICAgICAgICAgIHN5bnRoLmNvbm5lY3QodGhpcy5tYXN0ZXJWb2x1bWUpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinYwgVHJlbW9sbyBjcmVhdGlvbiBmYWlsZWQgZm9yIHBsYW5ldDonLCBwbGFuZXQubmFtZSwgZSk7XG4gICAgICAgIC8vIEZhbGxiYWNrOiBjb25uZWN0IHN5bnRoIGRpcmVjdGx5IHRvIG1hc3RlciB2b2x1bWVcbiAgICAgICAgc3ludGguY29ubmVjdCh0aGlzLm1hc3RlclZvbHVtZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFN0b3JlIHJlZmVyZW5jZXNcbiAgICAgIGNvbnN0IHN5bnRoRGF0YSA9IHtcbiAgICAgICAgc3ludGgsXG4gICAgICAgIHRyZW1vbG8sXG4gICAgICAgIGZyZXF1ZW5jeVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgdGhpcy5zeW50aHMuc2V0KHBsYW5ldC5pZCwgc3ludGhEYXRhKTtcbiAgICAgIHRoaXMudHJlbW9sb3Muc2V0KHBsYW5ldC5pZCwgdHJlbW9sbyk7XG5cbiAgICAgIC8vIEluaXRpYWxpemUgcGxhbmV0IHN0YXRlXG4gICAgICB0aGlzLnBsYW5ldFN0YXRlcy5zZXQocGxhbmV0LmlkLCB7XG4gICAgICAgIGlzTXV0ZWQ6IHBsYW5ldC5pc011dGVkIHx8IGZhbHNlLFxuICAgICAgICB2b2x1bWU6IDAuOCxcbiAgICAgICAgZnJlcXVlbmN5OiBmcmVxdWVuY3lcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc3ludGhEYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjcmVhdGluZyBzeW50aCBmb3IgcGxhbmV0ICR7cGxhbmV0Lm5hbWV9OmAsIGVycm9yKTtcbiAgICAgIGNvbnN0IGF1ZGlvRXJyb3I6IEF1ZGlvRXJyb3IgPSB7XG4gICAgICAgIHR5cGU6ICdpbml0aWFsaXphdGlvbicsXG4gICAgICAgIG1lc3NhZ2U6IGBFcnJvciBjcmVhdGluZyBzeW50aCBmb3IgcGxhbmV0ICR7cGxhbmV0Lm5hbWV9OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgcmVjb3ZlcmFibGU6IGZhbHNlIC8vIEluZGl2aWR1YWwgcGxhbmV0IHN5bnRoIGNyZWF0aW9uIGVycm9ycyBhcmUgbm90IHJlY292ZXJhYmxlXG4gICAgICB9O1xuICAgICAgdGhpcy5yZXBvcnRFcnJvcihhdWRpb0Vycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgYXR0YWNrIHRpbWUgYmFzZWQgb24gcGxhbmV0J3Mgb3JiaXRhbCB2ZWxvY2l0eVxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVBdHRhY2tUaW1lKHBsYW5ldDogUGxhbmV0KTogbnVtYmVyIHtcbiAgICBjb25zdCB2ZWxvY2l0eSA9IGNhbGN1bGF0ZU9yYml0YWxWZWxvY2l0eShwbGFuZXQpO1xuICAgIHJldHVybiBNYXRoLm1heCgwLjA1LCAwLjUgLSB2ZWxvY2l0eSAqIDAuNCk7IC8vIEZhc3RlciBwbGFuZXRzID0gcXVpY2tlciBhdHRhY2tcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgcmVsZWFzZSB0aW1lIGJhc2VkIG9uIHBsYW5ldCdzIGRpc3RhbmNlIGZyb20gc3VuXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZVJlbGVhc2VUaW1lKHBsYW5ldDogUGxhbmV0KTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5tYXgoMSwgcGxhbmV0LmRpc3RhbmNlRnJvbVN1biAqIDAuNSk7IC8vIEZhcnRoZXIgcGxhbmV0cyA9IGxvbmdlciByZWxlYXNlXG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRyZW1vbG8gcmF0ZSBiYXNlZCBvbiBwbGFuZXQncyBvcmJpdGFsIHBlcmlvZFxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVUcmVtb2xvUmF0ZShwbGFuZXQ6IFBsYW5ldCk6IG51bWJlciB7XG4gICAgLy8gTWFwIG9yYml0YWwgcGVyaW9kIHRvIHRyZW1vbG8gZnJlcXVlbmN5IChzbG93ZXIgcGxhbmV0cyA9IHNsb3dlciB0cmVtb2xvKVxuICAgIHJldHVybiBNYXRoLm1heCgwLjUsIE1hdGgubWluKDgsIDM2NSAvIHBsYW5ldC5vcmJpdGFsUGVyaW9kKSk7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgbXVzaWNhbCBwYXR0ZXJuIGJhc2VkIG9uIG9yYml0YWwgY2hhcmFjdGVyaXN0aWNzXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlUGxhbmV0UGF0dGVybihwbGFuZXQ6IFBsYW5ldCk6IG51bWJlcltdIHtcbiAgICBjb25zdCB2ZWxvY2l0eSA9IGNhbGN1bGF0ZU9yYml0YWxWZWxvY2l0eShwbGFuZXQpO1xuICAgIGNvbnN0IHBhdHRlcm5MZW5ndGggPSBNYXRoLm1heCg0LCBNYXRoLm1pbigxNiwgTWF0aC5mbG9vcihwbGFuZXQub3JiaXRhbFBlcmlvZCAvIDUwKSkpO1xuICAgIFxuICAgIGNvbnN0IHBhdHRlcm46IG51bWJlcltdID0gW107XG4gICAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXR0ZXJuTGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIENyZWF0ZSByaHl0aG0gYmFzZWQgb24gb3JiaXRhbCBjaGFyYWN0ZXJpc3RpY3NcbiAgICAgIGlmICh2ZWxvY2l0eSA+IDAuNCkge1xuICAgICAgICAvLyBGYXN0IHBsYW5ldHM6IG1vcmUgZnJlcXVlbnQgbm90ZXNcbiAgICAgICAgcGF0dGVybi5wdXNoKGkgJSAyID09PSAwID8gMSA6IDApO1xuICAgICAgfSBlbHNlIGlmICh2ZWxvY2l0eSA+IDAuMikge1xuICAgICAgICAvLyBNZWRpdW0gcGxhbmV0czogbW9kZXJhdGUgcmh5dGhtXG4gICAgICAgIHBhdHRlcm4ucHVzaChpICUgMyA9PT0gMCA/IDEgOiAoaSAlIDMgPT09IDEgPyAwLjUgOiAwKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTbG93IHBsYW5ldHM6IHNwYXJzZSBub3Rlc1xuICAgICAgICBwYXR0ZXJuLnB1c2goaSAlIDQgPT09IDAgPyAxIDogMCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBwYXR0ZXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgYWxsIHBsYW5ldHMgZm9yIGF1ZGlvIHBsYXliYWNrXG4gICAqL1xuICBhc3luYyBpbml0aWFsaXplUGxhbmV0cyhwbGFuZXRzOiBQbGFuZXRbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXRoaXMuaXNJbml0aWFsaXplZCkge1xuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgIH1cblxuICAgICAgbGV0IHN1Y2Nlc3NDb3VudCA9IDA7XG4gICAgICBwbGFuZXRzLmZvckVhY2gocGxhbmV0ID0+IHtcbiAgICAgICAgY29uc3Qgc3ludGggPSB0aGlzLmNyZWF0ZVBsYW5ldFN5bnRoKHBsYW5ldCk7XG4gICAgICAgIGlmIChzeW50aCkge1xuICAgICAgICAgIHN1Y2Nlc3NDb3VudCsrO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKHN1Y2Nlc3NDb3VudCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIGFueSBwbGFuZXQgc3ludGhzJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKGDwn6qQICR7c3VjY2Vzc0NvdW50fS8ke3BsYW5ldHMubGVuZ3RofSBwbGFuZXRzIGluaXRpYWxpemVkIGZvciBhdWRpbyBwbGF5YmFja2ApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgcGxhbmV0czonLCBlcnJvcik7XG4gICAgICBjb25zdCBhdWRpb0Vycm9yOiBBdWRpb0Vycm9yID0ge1xuICAgICAgICB0eXBlOiAnaW5pdGlhbGl6YXRpb24nLFxuICAgICAgICBtZXNzYWdlOiBgRXJyb3IgaW5pdGlhbGl6aW5nIHBsYW5ldHM6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICByZWNvdmVyYWJsZTogdHJ1ZVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgdGhpcy5yZXBvcnRFcnJvcihhdWRpb0Vycm9yKTtcbiAgICAgIFxuICAgICAgLy8gQXR0ZW1wdCByZWNvdmVyeVxuICAgICAgY29uc3QgcmVjb3ZlcmVkID0gYXdhaXQgdGhpcy5hdHRlbXB0UmVjb3ZlcnkoYXVkaW9FcnJvcik7XG4gICAgICBpZiAoIXJlY292ZXJlZCkge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgdGhlIGNlbGVzdGlhbCBzeW1waG9ueVxuICAgKi9cbiAgYXN5bmMgc3RhcnQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghdGhpcy5pc0luaXRpYWxpemVkKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSBoYXZlIGEgZHVtbXkgYXVkaW8gY29udGV4dCAoYXVkaW8gZmFpbGVkIHRvIGxvYWQpLCBqdXN0IHVwZGF0ZSBzdGF0ZSBhbmQgcmV0dXJuXG4gICAgICBpZiAoIXRoaXMuYXVkaW9Db250ZXh0ICYmIHRoaXMuYXVkaW9TdGF0ZS5oYXNFcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UpCBTdGFydGluZyB3aXRoIGR1bW15IGF1ZGlvIChubyBzb3VuZCknKTtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5pc1BsYXlpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLmF1ZGlvU3RhdGUuaXNQbGF5aW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy51cGRhdGVDb250ZXh0U3RhdGUoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuYXVkaW9Db250ZXh0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQXVkaW8gY29udGV4dCBub3QgYXZhaWxhYmxlJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFJlc3VtZSBhdWRpbyBjb250ZXh0IGlmIHN1c3BlbmRlZCAoYnJvd3NlciBhdXRvcGxheSBwb2xpY3kpXG4gICAgICBpZiAodGhpcy5hdWRpb0NvbnRleHQuc3RhdGUgPT09ICdzdXNwZW5kZWQnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hdWRpb0NvbnRleHQucmVzdW1lKCk7XG4gICAgICAgICAgdGhpcy51cGRhdGVDb250ZXh0U3RhdGUoKTtcbiAgICAgICAgfSBjYXRjaCAoY29udGV4dEVycm9yKSB7XG4gICAgICAgICAgY29uc3QgYXVkaW9FcnJvcjogQXVkaW9FcnJvciA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdjb250ZXh0JyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBGYWlsZWQgdG8gcmVzdW1lIGF1ZGlvIGNvbnRleHQ6ICR7Y29udGV4dEVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBjb250ZXh0RXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgcmVjb3ZlcmFibGU6IHRydWVcbiAgICAgICAgICB9O1xuICAgICAgICAgIHRoaXMucmVwb3J0RXJyb3IoYXVkaW9FcnJvcik7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQXR0ZW1wdCByZWNvdmVyeVxuICAgICAgICAgIGNvbnN0IHJlY292ZXJlZCA9IGF3YWl0IHRoaXMuYXR0ZW1wdFJlY292ZXJ5KGF1ZGlvRXJyb3IpO1xuICAgICAgICAgIGlmICghcmVjb3ZlcmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBjb250ZXh0RXJyb3I7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEluaXRpYWxpemUgcGxhbmV0cyBpZiBub3QgYWxyZWFkeSBkb25lXG4gICAgICBpZiAodGhpcy5wbGFuZXRTdGF0ZXMuc2l6ZSA9PT0gMCkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+qkCBJbml0aWFsaXppbmcgcGxhbmV0cyBmb3IgYXVkaW8gcGxheWJhY2suLi4nKTtcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplUGxhbmV0cyhQTEFORVRTKTtcbiAgICAgIH1cblxuICAgICAgLy8gU3RhcnQgYWxsIHBsYW5ldCBsb29wc1xuICAgICAgdGhpcy5zdGFydFBsYW5ldExvb3BzKCk7XG5cbiAgICAgIHRoaXMuc2V0dGluZ3MuaXNQbGF5aW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuYXVkaW9TdGF0ZS5pc1BsYXlpbmcgPSB0cnVlO1xuICAgICAgdGhpcy51cGRhdGVDb250ZXh0U3RhdGUoKTtcbiAgICAgIHRoaXMuY2xlYXJFcnJvcigpOyAvLyBDbGVhciBhbnkgcHJldmlvdXMgZXJyb3JzXG4gICAgICBjb25zb2xlLmxvZygn8J+OtSBDZWxlc3RpYWwgc3ltcGhvbnkgc3RhcnRlZCcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBhdWRpb0Vycm9yOiBBdWRpb0Vycm9yID0ge1xuICAgICAgICB0eXBlOiAncGxheWJhY2snLFxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIHBsYXliYWNrIGVycm9yJyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICByZWNvdmVyYWJsZTogdHJ1ZVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHN0YXJ0IGF1ZGlvOicsIGVycm9yKTtcbiAgICAgIHRoaXMucmVwb3J0RXJyb3IoYXVkaW9FcnJvcik7XG4gICAgICBcbiAgICAgIC8vIEF0dGVtcHQgcmVjb3ZlcnlcbiAgICAgIGNvbnN0IHJlY292ZXJlZCA9IGF3YWl0IHRoaXMuYXR0ZW1wdFJlY292ZXJ5KGF1ZGlvRXJyb3IpO1xuICAgICAgaWYgKCFyZWNvdmVyZWQpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IHBsYW5ldCBsb29wcyB1c2luZyBUb25lLlRyYW5zcG9ydCBvciBXZWIgQXVkaW8gQVBJIHNjaGVkdWxpbmdcbiAgICovXG4gIHByaXZhdGUgc3RhcnRQbGFuZXRMb29wcygpOiB2b2lkIHtcbiAgICAvLyBTdGFydCBUcmFuc3BvcnQgaWYgYXZhaWxhYmxlIGFuZCBub3QgYWxyZWFkeSBydW5uaW5nXG4gICAgaWYgKFRvbmUgJiYgVG9uZS5UcmFuc3BvcnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChUb25lLlRyYW5zcG9ydC5zdGF0ZSAhPT0gJ3N0YXJ0ZWQnKSB7XG4gICAgICAgICAgVG9uZS5UcmFuc3BvcnQuc3RhcnQoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFRyYW5zcG9ydCBzdGFydGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinYwgVHJhbnNwb3J0IHN0YXJ0IGZhaWxlZDonLCBlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ/CflI0gVXNpbmcgV2ViIEF1ZGlvIEFQSSBzY2hlZHVsaW5nIChUb25lLlRyYW5zcG9ydCBub3QgYXZhaWxhYmxlKScpO1xuICAgIH1cbiAgICBcbiAgICAvLyBTY2hlZHVsZSBhbGwgcGxhbmV0c1xuICAgIHRoaXMucGxhbmV0U3RhdGVzLmZvckVhY2goKHN0YXRlLCBwbGFuZXRJZCkgPT4ge1xuICAgICAgaWYgKCFzdGF0ZS5pc011dGVkKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVQbGFuZXQocGxhbmV0SWQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgcGxhbmV0IGxvb3BzIHVzaW5nIFRvbmUuVHJhbnNwb3J0IG9yIFdlYiBBdWRpbyBBUElcbiAgICovXG4gIHByaXZhdGUgc3RvcFBsYW5ldExvb3BzKCk6IHZvaWQge1xuICAgIC8vIFN0b3AgYWxsIHBsYW5ldCBsb29wc1xuICAgIHRoaXMubG9vcHMuZm9yRWFjaCgobG9vcCwgcGxhbmV0SWQpID0+IHtcbiAgICAgIGlmIChsb29wKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKGxvb3AuZGlzcG9zZSkge1xuICAgICAgICAgICAgLy8gVG9uZS5qcyBsb29wXG4gICAgICAgICAgICBsb29wLmRpc3Bvc2UoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGxvb3Auc3RvcCkge1xuICAgICAgICAgICAgLy8gV2ViIEF1ZGlvIEFQSSBsb29wXG4gICAgICAgICAgICBsb29wLnN0b3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5sb2coYOKchSBTdG9wcGVkIGxvb3AgZm9yIHBsYW5ldCAke3BsYW5ldElkfWApO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KdjCBMb29wIHN0b3AgZmFpbGVkIGZvciBwbGFuZXQ6JywgcGxhbmV0SWQsIGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ2xlYXIgdGhlIGxvb3BzIG1hcFxuICAgIHRoaXMubG9vcHMuY2xlYXIoKTtcbiAgICBcbiAgICAvLyBTdG9wIFRyYW5zcG9ydCBpZiBpdCdzIHJ1bm5pbmdcbiAgICBpZiAoVG9uZSAmJiBUb25lLlRyYW5zcG9ydCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKFRvbmUuVHJhbnNwb3J0LnN0YXRlID09PSAnc3RhcnRlZCcpIHtcbiAgICAgICAgICBUb25lLlRyYW5zcG9ydC5zdG9wKCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBUcmFuc3BvcnQgc3RvcHBlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZygn4p2MIFRyYW5zcG9ydCBzdG9wIGZhaWxlZDonLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2NoZWR1bGUgYSBwbGFuZXQncyBhdWRpbyBldmVudHMgdXNpbmcgVG9uZS5UcmFuc3BvcnQgb3IgV2ViIEF1ZGlvIEFQSVxuICAgKi9cbiAgcHJpdmF0ZSBzY2hlZHVsZVBsYW5ldChwbGFuZXRJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5pc1BsYXlpbmcpIHJldHVybjtcbiAgICAgIFxuICAgICAgY29uc3Qgc3ludGhEYXRhID0gdGhpcy5zeW50aHMuZ2V0KHBsYW5ldElkKTtcbiAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wbGFuZXRTdGF0ZXMuZ2V0KHBsYW5ldElkKTtcbiAgICAgIFxuICAgICAgaWYgKCFzeW50aERhdGEgfHwgIXN0YXRlIHx8IHN0YXRlLmlzTXV0ZWQpIHJldHVybjtcbiAgICAgIFxuICAgICAgLy8gQ2FsY3VsYXRlIGludGVydmFsIGJhc2VkIG9uIHBsYW5ldCdzIG9yYml0YWwgcGVyaW9kXG4gICAgICBjb25zdCBpbnRlcnZhbE1zID0gdGhpcy5jYWxjdWxhdGVQbGFuZXRJbnRlcnZhbChwbGFuZXRJZCk7XG4gICAgICBcbiAgICAgIC8vIFVzZSBUb25lLlRyYW5zcG9ydCBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSB1c2UgV2ViIEF1ZGlvIEFQSSBzY2hlZHVsaW5nXG4gICAgICBpZiAoVG9uZSAmJiBUb25lLlRyYW5zcG9ydCAmJiBzeW50aERhdGEuc3ludGggJiYgc3ludGhEYXRhLnN5bnRoLnRyaWdnZXJBdHRhY2tSZWxlYXNlKSB7XG4gICAgICAgIC8vIFRvbmUuanMgc2NoZWR1bGluZ1xuICAgICAgICBjb25zdCBpbnRlcnZhbEJlYXRzID0gKGludGVydmFsTXMgLyAxMDAwKSAqICh0aGlzLnNldHRpbmdzLnRlbXBvIC8gNjApOyAvLyBDb252ZXJ0IG1zIHRvIGJlYXRzXG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgYSByZXBlYXRpbmcgbG9vcCBmb3IgdGhpcyBwbGFuZXRcbiAgICAgICAgY29uc3QgcGxhbmV0TG9vcCA9IG5ldyBUb25lLkxvb3AoKHRpbWU6IG51bWJlcikgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUcmlnZ2VyIG5vdGUgb24gdGhlIFRvbmUuanMgc3ludGhcbiAgICAgICAgICAgIHN5bnRoRGF0YS5zeW50aC50cmlnZ2VyQXR0YWNrUmVsZWFzZShcbiAgICAgICAgICAgICAgc3ludGhEYXRhLmZyZXF1ZW5jeSxcbiAgICAgICAgICAgICAgJzhuJywgLy8gRWlnaHRoIG5vdGUgZHVyYXRpb25cbiAgICAgICAgICAgICAgdGltZSxcbiAgICAgICAgICAgICAgc3RhdGUudm9sdW1lICogMC4zIC8vIFZlbG9jaXR5IGJhc2VkIG9uIHBsYW5ldCB2b2x1bWVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHRyaWdnZXJpbmcgVG9uZS5qcyBub3RlIGZvciBwbGFuZXQgJHtwbGFuZXRJZH06YCwgZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgaW50ZXJ2YWxCZWF0cyk7XG4gICAgICAgIFxuICAgICAgICAvLyBTdGFydCB0aGUgbG9vcFxuICAgICAgICBwbGFuZXRMb29wLnN0YXJ0KDApO1xuICAgICAgICBcbiAgICAgICAgLy8gU3RvcmUgdGhlIGxvb3AgcmVmZXJlbmNlXG4gICAgICAgIHRoaXMubG9vcHMuc2V0KHBsYW5ldElkLCBwbGFuZXRMb29wKTtcbiAgICAgICAgXG4gICAgICB9IGVsc2UgaWYgKHN5bnRoRGF0YS5zeW50aCAmJiBzeW50aERhdGEuc3ludGgub3NjaWxsYXRvciAmJiB0aGlzLmF1ZGlvQ29udGV4dCkge1xuICAgICAgICAvLyBXZWIgQXVkaW8gQVBJIGZhbGxiYWNrIHNjaGVkdWxpbmdcbiAgICAgICAgY29uc29sZS5sb2coYPCflI0gVXNpbmcgV2ViIEF1ZGlvIEFQSSBzY2hlZHVsaW5nIGZvciBwbGFuZXQgJHtwbGFuZXRJZH1gKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBhIHNpbXBsZSBvc2NpbGxhdG9yLWJhc2VkIGxvb3BcbiAgICAgICAgY29uc3QgcGxheU5vdGUgPSAoKSA9PiB7XG4gICAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmlzUGxheWluZyB8fCBzdGF0ZS5pc011dGVkKSByZXR1cm47XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBvc2NpbGxhdG9yIGZvciBlYWNoIG5vdGUgKHNpbXBsZSBhcHByb2FjaClcbiAgICAgICAgICAgIGNvbnN0IG9zY2lsbGF0b3IgPSB0aGlzLmF1ZGlvQ29udGV4dC5jcmVhdGVPc2NpbGxhdG9yKCk7XG4gICAgICAgICAgICBjb25zdCBnYWluTm9kZSA9IHRoaXMuYXVkaW9Db250ZXh0LmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgb3NjaWxsYXRvci50eXBlID0gc3ludGhEYXRhLnN5bnRoLm9zY2lsbGF0b3IudHlwZSB8fCAnc2luZSc7XG4gICAgICAgICAgICBvc2NpbGxhdG9yLmZyZXF1ZW5jeS52YWx1ZSA9IHN5bnRoRGF0YS5mcmVxdWVuY3k7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENvbm5lY3QgdG8gbWFzdGVyIHZvbHVtZVxuICAgICAgICAgICAgb3NjaWxsYXRvci5jb25uZWN0KGdhaW5Ob2RlKTtcbiAgICAgICAgICAgIGdhaW5Ob2RlLmNvbm5lY3QodGhpcy5tYXN0ZXJWb2x1bWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTaW1wbGUgZW52ZWxvcGVcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IHRoaXMuYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lO1xuICAgICAgICAgICAgZ2Fpbk5vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSgwLCBub3cpO1xuICAgICAgICAgICAgZ2Fpbk5vZGUuZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShzdGF0ZS52b2x1bWUgKiAwLjMsIG5vdyArIDAuMSk7IC8vIEF0dGFja1xuICAgICAgICAgICAgZ2Fpbk5vZGUuZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgwLCBub3cgKyAwLjMpOyAvLyBSZWxlYXNlXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFN0YXJ0IGFuZCBzdG9wIHRoZSBvc2NpbGxhdG9yXG4gICAgICAgICAgICBvc2NpbGxhdG9yLnN0YXJ0KG5vdyk7XG4gICAgICAgICAgICBvc2NpbGxhdG9yLnN0b3Aobm93ICsgMC4zKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2NoZWR1bGUgbmV4dCBub3RlXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5pc1BsYXlpbmcgJiYgIXN0YXRlLmlzTXV0ZWQpIHtcbiAgICAgICAgICAgICAgc2V0VGltZW91dChwbGF5Tm90ZSwgaW50ZXJ2YWxNcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHBsYXlpbmcgV2ViIEF1ZGlvIEFQSSBub3RlIGZvciBwbGFuZXQgJHtwbGFuZXRJZH06YCwgZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIFN0YXJ0IHBsYXlpbmdcbiAgICAgICAgcGxheU5vdGUoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFN0b3JlIGEgcmVmZXJlbmNlIHRvIHRoZSBwbGF5IGZ1bmN0aW9uIGZvciBjbGVhbnVwXG4gICAgICAgIHRoaXMubG9vcHMuc2V0KHBsYW5ldElkLCB7IHN0b3A6ICgpID0+IHtcbiAgICAgICAgICAvLyBUaGUgbG9vcCB3aWxsIHN0b3AgaXRzZWxmIHdoZW4gaXNQbGF5aW5nIGJlY29tZXMgZmFsc2VcbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UjSBTdG9wcGVkIFdlYiBBdWRpbyBBUEkgbG9vcCBmb3IgcGxhbmV0ICR7cGxhbmV0SWR9YCk7XG4gICAgICAgIH19KTtcbiAgICAgICAgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhg4pqg77iPIE5vIHZhbGlkIHN5bnRoIGF2YWlsYWJsZSBmb3IgcGxhbmV0ICR7cGxhbmV0SWR9YCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHNjaGVkdWxpbmcgcGxhbmV0ICR7cGxhbmV0SWR9OmAsIGVycm9yKTtcbiAgICAgIGNvbnN0IGF1ZGlvRXJyb3I6IEF1ZGlvRXJyb3IgPSB7XG4gICAgICAgIHR5cGU6ICdwbGF5YmFjaycsXG4gICAgICAgIG1lc3NhZ2U6IGBFcnJvciBzY2hlZHVsaW5nIHBsYW5ldCAke3BsYW5ldElkfTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIHJlY292ZXJhYmxlOiBmYWxzZVxuICAgICAgfTtcbiAgICAgIHRoaXMucmVwb3J0RXJyb3IoYXVkaW9FcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBwbGFuZXQgaW50ZXJ2YWwgYmFzZWQgb24gb3JiaXRhbCBwZXJpb2RcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlUGxhbmV0SW50ZXJ2YWwocGxhbmV0SWQ6IHN0cmluZyk6IG51bWJlciB7XG4gICAgLy8gVGhpcyBzaG91bGQgYmUgYmFzZWQgb24gdGhlIHBsYW5ldCdzIG9yYml0YWwgcGVyaW9kXG4gICAgLy8gRm9yIG5vdywgdXNlIGEgc2ltcGxlIG1hcHBpbmdcbiAgICBjb25zdCBiYXNlSW50ZXJ2YWwgPSAyMDAwOyAvLyAyIHNlY29uZHNcbiAgICBjb25zdCBwbGFuZXRNdWx0aXBsaWVyczogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHtcbiAgICAgICdtZXJjdXJ5JzogMC41LFxuICAgICAgJ3ZlbnVzJzogMC44LFxuICAgICAgJ2VhcnRoJzogMS4wLFxuICAgICAgJ21hcnMnOiAxLjUsXG4gICAgICAnanVwaXRlcic6IDIuMCxcbiAgICAgICdzYXR1cm4nOiAyLjUsXG4gICAgICAndXJhbnVzJzogMy4wLFxuICAgICAgJ25lcHR1bmUnOiAzLjVcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IG11bHRpcGxpZXIgPSBwbGFuZXRNdWx0aXBsaWVyc1twbGFuZXRJZC50b0xvd2VyQ2FzZSgpXSB8fCAxLjA7XG4gICAgcmV0dXJuIChiYXNlSW50ZXJ2YWwgKiBtdWx0aXBsaWVyKSAvICh0aGlzLnNldHRpbmdzLnRlbXBvIC8gMTIwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIHRoZSBjZWxlc3RpYWwgc3ltcGhvbnlcbiAgICovXG4gIHN0b3AoKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIElmIHdlIGhhdmUgZHVtbXkgYXVkaW8gKGF1ZGlvIGZhaWxlZCB0byBsb2FkKSwganVzdCB1cGRhdGUgc3RhdGUgYW5kIHJldHVyblxuICAgICAgaWYgKCF0aGlzLmF1ZGlvQ29udGV4dCAmJiB0aGlzLmF1ZGlvU3RhdGUuaGFzRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflKQgU3RvcHBpbmcgZHVtbXkgYXVkaW8gKG5vIHNvdW5kKScpO1xuICAgICAgICB0aGlzLnNldHRpbmdzLmlzUGxheWluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmF1ZGlvU3RhdGUuaXNQbGF5aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMudXBkYXRlQ29udGV4dFN0YXRlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gU3RvcCBhbGwgcGxhbmV0IGxvb3BzXG4gICAgICB0aGlzLnN0b3BQbGFuZXRMb29wcygpO1xuXG4gICAgICAvLyBTdG9wIGFsbCBvc2NpbGxhdG9yc1xuICAgICAgdGhpcy5zeW50aHMuZm9yRWFjaCgoc3ludGgsIHBsYW5ldElkKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHN5bnRoICYmIHN5bnRoLm9zY2lsbGF0b3IgJiYgdGhpcy5hdWRpb0NvbnRleHQpIHtcbiAgICAgICAgICAgIHN5bnRoLmdhaW5Ob2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUoMCwgdGhpcy5hdWRpb0NvbnRleHQuY3VycmVudFRpbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBzdG9wcGluZyBzeW50aCBmb3IgcGxhbmV0ICR7cGxhbmV0SWR9OmAsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuc2V0dGluZ3MuaXNQbGF5aW5nID0gZmFsc2U7XG4gICAgICB0aGlzLmF1ZGlvU3RhdGUuaXNQbGF5aW5nID0gZmFsc2U7XG4gICAgICB0aGlzLnVwZGF0ZUNvbnRleHRTdGF0ZSgpO1xuICAgICAgY29uc29sZS5sb2coJ/CflIcgQ2VsZXN0aWFsIHN5bXBob255IHN0b3BwZWQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgYXVkaW9FcnJvcjogQXVkaW9FcnJvciA9IHtcbiAgICAgICAgdHlwZTogJ3BsYXliYWNrJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBzdG9wcGluZyBwbGF5YmFjaycsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgcmVjb3ZlcmFibGU6IGZhbHNlIC8vIFN0b3BwaW5nIHNob3VsZCBub3QgYmUgcmVjb3ZlcmFibGUgYXMgaXQncyBhIHVzZXIgYWN0aW9uXG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzdG9wcGluZyBhdWRpbzonLCBlcnJvcik7XG4gICAgICB0aGlzLnJlcG9ydEVycm9yKGF1ZGlvRXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgbWFzdGVyIHZvbHVtZSAoMC4wIHRvIDEuMClcbiAgICovXG4gIHNldE1hc3RlclZvbHVtZSh2b2x1bWU6IG51bWJlcik6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnNldHRpbmdzLnZvbHVtZSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHZvbHVtZSkpO1xuICAgICAgaWYgKHRoaXMubWFzdGVyVm9sdW1lKSB7XG4gICAgICAgIC8vIENvbnZlcnQgbGluZWFyIHZvbHVtZSB0byBnYWluICgwLTEgcmFuZ2UpXG4gICAgICAgIHRoaXMubWFzdGVyVm9sdW1lLmdhaW4udmFsdWUgPSB0aGlzLnNldHRpbmdzLnZvbHVtZSAqIDAuNTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2V0dGluZyBtYXN0ZXIgdm9sdW1lOicsIGVycm9yKTtcbiAgICAgIGNvbnN0IGF1ZGlvRXJyb3I6IEF1ZGlvRXJyb3IgPSB7XG4gICAgICAgIHR5cGU6ICdwbGF5YmFjaycsXG4gICAgICAgIG1lc3NhZ2U6IGBFcnJvciBzZXR0aW5nIG1hc3RlciB2b2x1bWU6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICByZWNvdmVyYWJsZTogZmFsc2UgLy8gVm9sdW1lIGNvbnRyb2wgZXJyb3JzIGFyZSBub3QgY3JpdGljYWxcbiAgICAgIH07XG4gICAgICB0aGlzLnJlcG9ydEVycm9yKGF1ZGlvRXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGVtcG8gKEJQTSlcbiAgICovXG4gIHNldFRlbXBvKGJwbTogbnVtYmVyKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuc2V0dGluZ3MudGVtcG8gPSBNYXRoLm1heCg2MCwgTWF0aC5taW4oMTgwLCBicG0pKTtcbiAgICAgIC8vIFRlbXBvIGFmZmVjdHMgdGhlIHNjaGVkdWxpbmcgaW50ZXJ2YWxzLCByZXN0YXJ0IGxvb3BzIGlmIHBsYXlpbmdcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLmlzUGxheWluZykge1xuICAgICAgICB0aGlzLnN0b3BQbGFuZXRMb29wcygpO1xuICAgICAgICB0aGlzLnN0YXJ0UGxhbmV0TG9vcHMoKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2V0dGluZyB0ZW1wbzonLCBlcnJvcik7XG4gICAgICBjb25zdCBhdWRpb0Vycm9yOiBBdWRpb0Vycm9yID0ge1xuICAgICAgICB0eXBlOiAncGxheWJhY2snLFxuICAgICAgICBtZXNzYWdlOiBgRXJyb3Igc2V0dGluZyB0ZW1wbzogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIHJlY292ZXJhYmxlOiBmYWxzZSAvLyBUZW1wbyBjb250cm9sIGVycm9ycyBhcmUgbm90IGNyaXRpY2FsXG4gICAgICB9O1xuICAgICAgdGhpcy5yZXBvcnRFcnJvcihhdWRpb0Vycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRpbWUgbXVsdGlwbGllciBmb3Igb3JiaXRhbCBzcGVlZFxuICAgKi9cbiAgc2V0VGltZU11bHRpcGxpZXIobXVsdGlwbGllcjogbnVtYmVyKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMudGltZU11bHRpcGxpZXIgPSBNYXRoLm1heCgxLCBNYXRoLm1pbigxMDAwMCwgbXVsdGlwbGllcikpO1xuICAgICAgXG4gICAgICAvLyBSZXN0YXJ0IGxvb3BzIHdpdGggbmV3IHRpbWluZ1xuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuaXNQbGF5aW5nKSB7XG4gICAgICAgIHRoaXMuc3RvcFBsYW5ldExvb3BzKCk7XG4gICAgICAgIHRoaXMuc3RhcnRQbGFuZXRMb29wcygpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZXR0aW5nIHRpbWUgbXVsdGlwbGllcjonLCBlcnJvcik7XG4gICAgICBjb25zdCBhdWRpb0Vycm9yOiBBdWRpb0Vycm9yID0ge1xuICAgICAgICB0eXBlOiAncGxheWJhY2snLFxuICAgICAgICBtZXNzYWdlOiBgRXJyb3Igc2V0dGluZyB0aW1lIG11bHRpcGxpZXI6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICByZWNvdmVyYWJsZTogZmFsc2UgLy8gVGltZSBtdWx0aXBsaWVyIGVycm9ycyBhcmUgbm90IGNyaXRpY2FsXG4gICAgICB9O1xuICAgICAgdGhpcy5yZXBvcnRFcnJvcihhdWRpb0Vycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IG11dGUgc3RhdGUgZm9yIGEgc3BlY2lmaWMgcGxhbmV0XG4gICAqL1xuICBzZXRQbGFuZXRNdXRlKHBsYW5ldElkOiBzdHJpbmcsIGlzTXV0ZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGxhbmV0U3RhdGUgPSB0aGlzLnBsYW5ldFN0YXRlcy5nZXQocGxhbmV0SWQpO1xuICAgICAgaWYgKHBsYW5ldFN0YXRlKSB7XG4gICAgICAgIHBsYW5ldFN0YXRlLmlzTXV0ZWQgPSBpc011dGVkO1xuICAgICAgICBcbiAgICAgICAgaWYgKGlzTXV0ZWQpIHtcbiAgICAgICAgICAvLyBTdG9wIHRoZSBwbGFuZXQncyBhdWRpb1xuICAgICAgICAgIGNvbnN0IHN5bnRoID0gdGhpcy5zeW50aHMuZ2V0KHBsYW5ldElkKTtcbiAgICAgICAgICBpZiAoc3ludGggJiYgc3ludGguZ2Fpbk5vZGUgJiYgdGhpcy5hdWRpb0NvbnRleHQpIHtcbiAgICAgICAgICAgIHN5bnRoLmdhaW5Ob2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUoMCwgdGhpcy5hdWRpb0NvbnRleHQuY3VycmVudFRpbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNldHRpbmdzLmlzUGxheWluZykge1xuICAgICAgICAgIC8vIFN0YXJ0IHRoZSBwbGFuZXQncyBhdWRpbyBpZiBjdXJyZW50bHkgcGxheWluZ1xuICAgICAgICAgIHRoaXMuc2NoZWR1bGVQbGFuZXQocGxhbmV0SWQpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhgJHtwbGFuZXRJZH0gJHtpc011dGVkID8gJ211dGVkJyA6ICd1bm11dGVkJ31gKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igc2V0dGluZyBtdXRlIHN0YXRlIGZvciBwbGFuZXQgJHtwbGFuZXRJZH06YCwgZXJyb3IpO1xuICAgICAgY29uc3QgYXVkaW9FcnJvcjogQXVkaW9FcnJvciA9IHtcbiAgICAgICAgdHlwZTogJ3BsYXliYWNrJyxcbiAgICAgICAgbWVzc2FnZTogYEVycm9yIHNldHRpbmcgbXV0ZSBzdGF0ZSBmb3IgcGxhbmV0ICR7cGxhbmV0SWR9OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgcmVjb3ZlcmFibGU6IGZhbHNlIC8vIFBsYW5ldCBtdXRlIGVycm9ycyBhcmUgbm90IGNyaXRpY2FsXG4gICAgICB9O1xuICAgICAgdGhpcy5yZXBvcnRFcnJvcihhdWRpb0Vycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIG11dGUgc3RhdGUgZm9yIGEgc3BlY2lmaWMgcGxhbmV0XG4gICAqL1xuICB0b2dnbGVQbGFuZXRNdXRlKHBsYW5ldElkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBwbGFuZXRTdGF0ZSA9IHRoaXMucGxhbmV0U3RhdGVzLmdldChwbGFuZXRJZCk7XG4gICAgaWYgKHBsYW5ldFN0YXRlKSB7XG4gICAgICB0aGlzLnNldFBsYW5ldE11dGUocGxhbmV0SWQsICFwbGFuZXRTdGF0ZS5pc011dGVkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IGluZGl2aWR1YWwgcGxhbmV0IHZvbHVtZVxuICAgKi9cbiAgc2V0UGxhbmV0Vm9sdW1lKHBsYW5ldElkOiBzdHJpbmcsIHZvbHVtZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBsYW5ldFN0YXRlID0gdGhpcy5wbGFuZXRTdGF0ZXMuZ2V0KHBsYW5ldElkKTtcbiAgICAgIGlmIChwbGFuZXRTdGF0ZSkge1xuICAgICAgICBwbGFuZXRTdGF0ZS52b2x1bWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB2b2x1bWUpKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igc2V0dGluZyB2b2x1bWUgZm9yIHBsYW5ldCAke3BsYW5ldElkfTpgLCBlcnJvcik7XG4gICAgICBjb25zdCBhdWRpb0Vycm9yOiBBdWRpb0Vycm9yID0ge1xuICAgICAgICB0eXBlOiAncGxheWJhY2snLFxuICAgICAgICBtZXNzYWdlOiBgRXJyb3Igc2V0dGluZyB2b2x1bWUgZm9yIHBsYW5ldCAke3BsYW5ldElkfTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIHJlY292ZXJhYmxlOiBmYWxzZSAvLyBQbGFuZXQgdm9sdW1lIGVycm9ycyBhcmUgbm90IGNyaXRpY2FsXG4gICAgICB9O1xuICAgICAgdGhpcy5yZXBvcnRFcnJvcihhdWRpb0Vycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgYXVkaW8gc2V0dGluZ3NcbiAgICovXG4gIGdldFNldHRpbmdzKCk6IEF1ZGlvU2V0dGluZ3Mge1xuICAgIHJldHVybiB7IC4uLnRoaXMuc2V0dGluZ3MgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcGxhbmV0IGF1ZGlvIHN0YXRlXG4gICAqL1xuICBnZXRQbGFuZXRTdGF0ZShwbGFuZXRJZDogc3RyaW5nKTogUGxhbmV0QXVkaW9TdGF0ZSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLnBsYW5ldFN0YXRlcy5nZXQocGxhbmV0SWQpIHx8IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmVwb3J0IGFuIGVycm9yIHRvIGFsbCByZWdpc3RlcmVkIGVycm9yIGNhbGxiYWNrc1xuICAgKi9cbiAgcHJpdmF0ZSByZXBvcnRFcnJvcihlcnJvcjogQXVkaW9FcnJvcik6IHZvaWQge1xuICAgIHRoaXMuYXVkaW9TdGF0ZS5oYXNFcnJvciA9IHRydWU7XG4gICAgdGhpcy5hdWRpb1N0YXRlLmVycm9yID0gZXJyb3I7XG4gICAgXG4gICAgLy8gTm90aWZ5IGFsbCBlcnJvciBjYWxsYmFja3NcbiAgICB0aGlzLmVycm9yQ2FsbGJhY2tzLmZvckVhY2goY2FsbGJhY2sgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xuICAgICAgfSBjYXRjaCAoY2FsbGJhY2tFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBlcnJvciBjYWxsYmFjazonLCBjYWxsYmFja0Vycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBBbHNvIG5vdGlmeSBzdGF0ZSBjaGFuZ2UgY2FsbGJhY2tzXG4gICAgdGhpcy5ub3RpZnlTdGF0ZUNoYW5nZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vdGlmeSBhbGwgc3RhdGUgY2hhbmdlIGNhbGxiYWNrcyBvZiBjdXJyZW50IGF1ZGlvIHN0YXRlXG4gICAqL1xuICBwcml2YXRlIG5vdGlmeVN0YXRlQ2hhbmdlKCk6IHZvaWQge1xuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuZm9yRWFjaChjYWxsYmFjayA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjYWxsYmFjayh7IC4uLnRoaXMuYXVkaW9TdGF0ZSB9KTtcbiAgICAgIH0gY2F0Y2ggKGNhbGxiYWNrRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gc3RhdGUgY2hhbmdlIGNhbGxiYWNrOicsIGNhbGxiYWNrRXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhdWRpbyBjb250ZXh0IHN0YXRlXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZUNvbnRleHRTdGF0ZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5hdWRpb0NvbnRleHQpIHtcbiAgICAgIHRoaXMuYXVkaW9TdGF0ZS5jb250ZXh0U3RhdGUgPSB0aGlzLmF1ZGlvQ29udGV4dC5zdGF0ZSBhcyAnY2xvc2VkJyB8ICdydW5uaW5nJyB8ICdzdXNwZW5kZWQnIHwgJ3Vua25vd24nO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmF1ZGlvU3RhdGUuY29udGV4dFN0YXRlID0gJ3Vua25vd24nO1xuICAgIH1cbiAgICB0aGlzLm5vdGlmeVN0YXRlQ2hhbmdlKCk7XG4gIH1cblxuICAvKipcbiAgICogQXR0ZW1wdCB0byByZWNvdmVyIGZyb20gYW4gZXJyb3JcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYXR0ZW1wdFJlY292ZXJ5KGVycm9yOiBBdWRpb0Vycm9yKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgaWYgKCFlcnJvci5yZWNvdmVyYWJsZSB8fCB0aGlzLnJldHJ5Q291bnQgPj0gdGhpcy5tYXhSZXRyaWVzKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5yZXRyeUNvdW50Kys7XG4gICAgY29uc29sZS5sb2coYEF0dGVtcHRpbmcgcmVjb3ZlcnkgKCR7dGhpcy5yZXRyeUNvdW50fS8ke3RoaXMubWF4UmV0cmllc30pIGZvciBlcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuXG4gICAgdHJ5IHtcbiAgICAgIHN3aXRjaCAoZXJyb3IudHlwZSkge1xuICAgICAgICBjYXNlICdjb250ZXh0JzpcbiAgICAgICAgICAvLyBUcnkgdG8gcmVzdW1lIGF1ZGlvIGNvbnRleHRcbiAgICAgICAgICBpZiAodGhpcy5hdWRpb0NvbnRleHQgJiYgdGhpcy5hdWRpb0NvbnRleHQuc3RhdGUgPT09ICdzdXNwZW5kZWQnKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmF1ZGlvQ29udGV4dC5yZXN1bWUoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udGV4dFN0YXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgICBjYXNlICdpbml0aWFsaXphdGlvbic6XG4gICAgICAgICAgLy8gVHJ5IHRvIHJlaW5pdGlhbGl6ZVxuICAgICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBcbiAgICAgICAgY2FzZSAncGxheWJhY2snOlxuICAgICAgICAgIC8vIFRyeSB0byByZXN0YXJ0IHBsYXliYWNrXG4gICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuaXNQbGF5aW5nKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnN0YXJ0KCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIC8vIEZvciB1bmtub3duIGVycm9ycywgdHJ5IGEgZnVsbCByZWluaXRpYWxpemF0aW9uXG4gICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSBjYXRjaCAocmVjb3ZlcnlFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignUmVjb3ZlcnkgYXR0ZW1wdCBmYWlsZWQ6JywgcmVjb3ZlcnlFcnJvcik7XG4gICAgICAvLyBSZXBvcnQgcmVjb3ZlcnkgZXJyb3JcbiAgICAgIHRoaXMucmVwb3J0RXJyb3Ioe1xuICAgICAgICB0eXBlOiAndW5rbm93bicsXG4gICAgICAgIG1lc3NhZ2U6IGBSZWNvdmVyeSBmYWlsZWQ6ICR7cmVjb3ZlcnlFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gcmVjb3ZlcnlFcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgcmVjb3ZlcmFibGU6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGVycm9yIGNhbGxiYWNrXG4gICAqL1xuICBvbkVycm9yKGNhbGxiYWNrOiAoZXJyb3I6IEF1ZGlvRXJyb3IpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLmVycm9yQ2FsbGJhY2tzLmFkZChjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGVycm9yIGNhbGxiYWNrXG4gICAqL1xuICBvZmZFcnJvcihjYWxsYmFjazogKGVycm9yOiBBdWRpb0Vycm9yKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5lcnJvckNhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBzdGF0ZSBjaGFuZ2UgY2FsbGJhY2tcbiAgICovXG4gIG9uU3RhdGVDaGFuZ2UoY2FsbGJhY2s6IChzdGF0ZTogQXVkaW9TdGF0ZSkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgc3RhdGUgY2hhbmdlIGNhbGxiYWNrXG4gICAqL1xuICBvZmZTdGF0ZUNoYW5nZShjYWxsYmFjazogKHN0YXRlOiBBdWRpb1N0YXRlKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IGF1ZGlvIHN0YXRlXG4gICAqL1xuICBnZXRBdWRpb1N0YXRlKCk6IEF1ZGlvU3RhdGUge1xuICAgIHJldHVybiB7IC4uLnRoaXMuYXVkaW9TdGF0ZSB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGFueSBjdXJyZW50IGVycm9yIHN0YXRlXG4gICAqL1xuICBjbGVhckVycm9yKCk6IHZvaWQge1xuICAgIHRoaXMuYXVkaW9TdGF0ZS5oYXNFcnJvciA9IGZhbHNlO1xuICAgIHRoaXMuYXVkaW9TdGF0ZS5lcnJvciA9IG51bGw7XG4gICAgdGhpcy5yZXRyeUNvdW50ID0gMDtcbiAgICB0aGlzLm5vdGlmeVN0YXRlQ2hhbmdlKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gdXAgYWxsIGF1ZGlvIHJlc291cmNlc1xuICAgKi9cbiAgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLnN0b3AoKTtcbiAgICBcbiAgICAvLyBTdG9wIGFuZCBkaXNjb25uZWN0IGFsbCBvc2NpbGxhdG9yc1xuICAgIHRoaXMuc3ludGhzLmZvckVhY2goKHN5bnRoLCBwbGFuZXRJZCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHN5bnRoICYmIHN5bnRoLm9zY2lsbGF0b3IpIHtcbiAgICAgICAgICBzeW50aC5vc2NpbGxhdG9yLnN0b3AoKTtcbiAgICAgICAgICBzeW50aC5vc2NpbGxhdG9yLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICBzeW50aC5nYWluTm9kZS5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgaWYgKHN5bnRoLnRyZW1vbG9Pc2NpbGxhdG9yKSB7XG4gICAgICAgICAgICBzeW50aC50cmVtb2xvT3NjaWxsYXRvci5zdG9wKCk7XG4gICAgICAgICAgICBzeW50aC50cmVtb2xvT3NjaWxsYXRvci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzeW50aC50cmVtb2xvR2Fpbikge1xuICAgICAgICAgICAgc3ludGgudHJlbW9sb0dhaW4uZGlzY29ubmVjdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZGlzcG9zaW5nIHN5bnRoIGZvciBwbGFuZXQgJHtwbGFuZXRJZH06YCwgZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIENsZWFyIGFsbCBtYXBzXG4gICAgdGhpcy5zeW50aHMuY2xlYXIoKTtcbiAgICB0aGlzLmxvb3BzLmNsZWFyKCk7XG4gICAgdGhpcy50cmVtb2xvcy5jbGVhcigpO1xuICAgIHRoaXMucGxhbmV0U3RhdGVzLmNsZWFyKCk7XG4gICAgdGhpcy5zY2hlZHVsZWRFdmVudHMuY2xlYXIoKTtcbiAgICBcbiAgICAvLyBEaXNjb25uZWN0IG1hc3RlciBlZmZlY3RzXG4gICAgdHJ5IHtcbiAgICAgIGlmICh0aGlzLm1hc3RlclZvbHVtZSkgdGhpcy5tYXN0ZXJWb2x1bWUuZGlzY29ubmVjdCgpO1xuICAgICAgaWYgKHRoaXMuY29tcHJlc3NvcikgdGhpcy5jb21wcmVzc29yLmRpc2Nvbm5lY3QoKTtcbiAgICAgIGlmICh0aGlzLmVxMykge1xuICAgICAgICB0aGlzLmVxMy5sb3cuZGlzY29ubmVjdCgpO1xuICAgICAgICB0aGlzLmVxMy5taWQuZGlzY29ubmVjdCgpO1xuICAgICAgICB0aGlzLmVxMy5oaWdoLmRpc2Nvbm5lY3QoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmxpbWl0ZXIpIHRoaXMubGltaXRlci5kaXNjb25uZWN0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRpc2Nvbm5lY3RpbmcgbWFzdGVyIGVmZmVjdHM6JywgZXJyb3IpO1xuICAgIH1cbiAgICBcbiAgICAvLyBDbG9zZSBhdWRpbyBjb250ZXh0XG4gICAgaWYgKHRoaXMuYXVkaW9Db250ZXh0KSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLmF1ZGlvQ29udGV4dC5jbG9zZSgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2xvc2luZyBhdWRpbyBjb250ZXh0OicsIGVycm9yKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuYXVkaW9Db250ZXh0ID0gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5pc0luaXRpYWxpemVkID0gZmFsc2U7XG4gICAgdGhpcy5hdWRpb1N0YXRlLmlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmF1ZGlvU3RhdGUuaXNQbGF5aW5nID0gZmFsc2U7XG4gICAgdGhpcy51cGRhdGVDb250ZXh0U3RhdGUoKTtcbiAgICBjb25zb2xlLmxvZygn8J+nuSBBdWRpbyBlbmdpbmUgZGlzcG9zZWQnKTtcbiAgfVxuICBcbiAgLy8gQ2FsY3VsYXRlIGZyZXF1ZW5jeSBiYXNlZCBvbiBwbGFuZXQgZGlzdGFuY2UgZnJvbSBzdW5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVGcmVxdWVuY3kocGxhbmV0OiBQbGFuZXQpOiBudW1iZXIge1xuICAgIC8vIE1hcCBwbGFuZXQgZGlzdGFuY2UgdG8gZnJlcXVlbmN5IChjbG9zZXIgcGxhbmV0cyA9IGhpZ2hlciBmcmVxdWVuY3kpXG4gICAgLy8gVXNpbmcgbG9nYXJpdGhtaWMgc2NhbGluZyBmb3IgYmV0dGVyIG11c2ljYWwgZGlzdHJpYnV0aW9uXG4gICAgY29uc3QgbWluRnJlcSA9IDExMDsgLy8gQTJcbiAgICBjb25zdCBtYXhGcmVxID0gODgwOyAvLyBBNVxuICAgIGNvbnN0IGxvZ01pbiA9IE1hdGgubG9nKDAuNCk7IC8vIE1lcmN1cnkgZGlzdGFuY2VcbiAgICBjb25zdCBsb2dNYXggPSBNYXRoLmxvZygzMCk7IC8vIE5lcHR1bmUgZGlzdGFuY2VcbiAgICBcbiAgICBjb25zdCBub3JtYWxpemVkRGlzdGFuY2UgPSAoTWF0aC5sb2cocGxhbmV0LmRpc3RhbmNlRnJvbVN1bikgLSBsb2dNaW4pIC8gKGxvZ01heCAtIGxvZ01pbik7XG4gICAgY29uc3QgZnJlcXVlbmN5ID0gbWF4RnJlcSAtIChub3JtYWxpemVkRGlzdGFuY2UgKiAobWF4RnJlcSAtIG1pbkZyZXEpKTtcbiAgICBcbiAgICByZXR1cm4gTWF0aC5tYXgobWluRnJlcSwgTWF0aC5taW4obWF4RnJlcSwgZnJlcXVlbmN5KSk7XG4gIH1cbn1cblxuLy8gU2luZ2xldG9uIGluc3RhbmNlXG5sZXQgYXVkaW9FbmdpbmU6IENlbGVzdGlhbEF1ZGlvRW5naW5lIHwgbnVsbCA9IG51bGw7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBdWRpb0VuZ2luZSgpOiBDZWxlc3RpYWxBdWRpb0VuZ2luZSB7XG4gIGlmICghYXVkaW9FbmdpbmUpIHtcbiAgICBhdWRpb0VuZ2luZSA9IG5ldyBDZWxlc3RpYWxBdWRpb0VuZ2luZSgpO1xuICB9XG4gIHJldHVybiBhdWRpb0VuZ2luZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0QXVkaW9FbmdpbmUoKTogdm9pZCB7XG4gIGlmIChhdWRpb0VuZ2luZSkge1xuICAgIGF1ZGlvRW5naW5lLmRpc3Bvc2UoKTtcbiAgICBhdWRpb0VuZ2luZSA9IG51bGw7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJjYWxjdWxhdGVPcmJpdGFsVmVsb2NpdHkiLCJQTEFORVRTIiwiVG9uZSIsIkNlbGVzdGlhbEF1ZGlvRW5naW5lIiwic2V0VG9uZVJlZmVyZW5jZSIsInRvbmVSZWYiLCJjb25zb2xlIiwibG9nIiwidmVyc2lvbiIsImluaXRpYWxpemUiLCJpc0luaXRpYWxpemVkIiwidG9uZU1vZHVsZSIsIk9iamVjdCIsImtleXMiLCJpbXBvcnRFcnJvciIsImVycm9yIiwic3RhcnQiLCJUcmFuc3BvcnQiLCJmb3JFYWNoIiwia2V5IiwiZGVmYXVsdCIsIkNvbXBvbmVudCIsIkVmZmVjdCIsIkluc3RydW1lbnQiLCJTaWduYWwiLCJ2b2x1bWVMb2NhdGlvbnMiLCJsb2NhdGlvbiIsInBhcnRzIiwic3BsaXQiLCJvYmoiLCJwYXJ0IiwiVm9sdW1lQ29uc3RydWN0b3IiLCJlIiwiYnBtIiwidmFsdWUiLCJzdG9wIiwiY2FuY2VsIiwiY29udGV4dCIsInJhd0NvbnRleHQiLCJnZXRDb250ZXh0IiwiYXVkaW9TdGF0ZSIsImlzUGxheWluZyIsImhhc0Vycm9yIiwidHlwZSIsIm1lc3NhZ2UiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwicmVjb3ZlcmFibGUiLCJjb250ZXh0U3RhdGUiLCJmaWx0ZXIiLCJWb2x1bWUiLCJSZXZlcmIiLCJTeW50aCIsImF1ZGlvQ29udGV4dCIsIndpbmRvdyIsIkF1ZGlvQ29udGV4dCIsIndlYmtpdEF1ZGlvQ29udGV4dCIsIm1hc3RlclZvbHVtZSIsImNyZWF0ZUdhaW4iLCJnYWluIiwiY29ubmVjdCIsImRlc3RpbmF0aW9uIiwiRXJyb3IiLCJyZXZlcmIiLCJjb21wcmVzc29yIiwiZXEzIiwibGltaXRlciIsInNldHRpbmdzIiwidGVtcG8iLCJ1cGRhdGVDb250ZXh0U3RhdGUiLCJjbGVhckVycm9yIiwiYXVkaW9FcnJvciIsInJlcG9ydEVycm9yIiwicmVjb3ZlcmVkIiwiYXR0ZW1wdFJlY292ZXJ5IiwibWFwRGlzdGFuY2VUb0ZyZXF1ZW5jeSIsImRpc3RhbmNlRnJvbVN1biIsIm1pbkRpc3RhbmNlIiwibWF4RGlzdGFuY2UiLCJub3JtYWxpemVkRGlzdGFuY2UiLCJpbnZlcnNlRmFjdG9yIiwibWluRnJlcSIsIm1heEZyZXEiLCJmcmVxdWVuY3kiLCJNYXRoIiwicG93Iiwicm91bmQiLCJjcmVhdGVQbGFuZXRTeW50aCIsInBsYW5ldCIsIm9zY2lsbGF0b3JUeXBlIiwic3ludGgiLCJuYW1lIiwib3NjaWxsYXRvciIsImVudmVsb3BlIiwiYXR0YWNrIiwiY2FsY3VsYXRlQXR0YWNrVGltZSIsImRlY2F5Iiwic3VzdGFpbiIsInJlbGVhc2UiLCJjYWxjdWxhdGVSZWxlYXNlVGltZSIsImNyZWF0ZU9zY2lsbGF0b3IiLCJnYWluTm9kZSIsInNldFZhbHVlQXRUaW1lIiwiY3VycmVudFRpbWUiLCJsaW5lYXJSYW1wVG9WYWx1ZUF0VGltZSIsInRvRGVzdGluYXRpb24iLCJ0aW1lIiwidHJlbW9sbyIsIlRyZW1vbG8iLCJjYWxjdWxhdGVUcmVtb2xvUmF0ZSIsImRlcHRoIiwic3ludGhEYXRhIiwic3ludGhzIiwic2V0IiwiaWQiLCJ0cmVtb2xvcyIsInBsYW5ldFN0YXRlcyIsImlzTXV0ZWQiLCJ2b2x1bWUiLCJ2ZWxvY2l0eSIsIm1heCIsIm1pbiIsIm9yYml0YWxQZXJpb2QiLCJnZW5lcmF0ZVBsYW5ldFBhdHRlcm4iLCJwYXR0ZXJuTGVuZ3RoIiwiZmxvb3IiLCJwYXR0ZXJuIiwiaSIsInB1c2giLCJpbml0aWFsaXplUGxhbmV0cyIsInBsYW5ldHMiLCJzdWNjZXNzQ291bnQiLCJsZW5ndGgiLCJzdGF0ZSIsInJlc3VtZSIsImNvbnRleHRFcnJvciIsInNpemUiLCJzdGFydFBsYW5ldExvb3BzIiwicGxhbmV0SWQiLCJzY2hlZHVsZVBsYW5ldCIsInN0b3BQbGFuZXRMb29wcyIsImxvb3BzIiwibG9vcCIsImRpc3Bvc2UiLCJjbGVhciIsImdldCIsImludGVydmFsTXMiLCJjYWxjdWxhdGVQbGFuZXRJbnRlcnZhbCIsInRyaWdnZXJBdHRhY2tSZWxlYXNlIiwiaW50ZXJ2YWxCZWF0cyIsInBsYW5ldExvb3AiLCJMb29wIiwicGxheU5vdGUiLCJzZXRUaW1lb3V0IiwiYmFzZUludGVydmFsIiwicGxhbmV0TXVsdGlwbGllcnMiLCJtdWx0aXBsaWVyIiwidG9Mb3dlckNhc2UiLCJzZXRNYXN0ZXJWb2x1bWUiLCJzZXRUZW1wbyIsInNldFRpbWVNdWx0aXBsaWVyIiwidGltZU11bHRpcGxpZXIiLCJzZXRQbGFuZXRNdXRlIiwicGxhbmV0U3RhdGUiLCJ0b2dnbGVQbGFuZXRNdXRlIiwic2V0UGxhbmV0Vm9sdW1lIiwiZ2V0U2V0dGluZ3MiLCJnZXRQbGFuZXRTdGF0ZSIsImVycm9yQ2FsbGJhY2tzIiwiY2FsbGJhY2siLCJjYWxsYmFja0Vycm9yIiwibm90aWZ5U3RhdGVDaGFuZ2UiLCJzdGF0ZUNoYW5nZUNhbGxiYWNrcyIsInJldHJ5Q291bnQiLCJtYXhSZXRyaWVzIiwicmVjb3ZlcnlFcnJvciIsIm9uRXJyb3IiLCJhZGQiLCJvZmZFcnJvciIsImRlbGV0ZSIsIm9uU3RhdGVDaGFuZ2UiLCJvZmZTdGF0ZUNoYW5nZSIsImdldEF1ZGlvU3RhdGUiLCJkaXNjb25uZWN0IiwidHJlbW9sb09zY2lsbGF0b3IiLCJ0cmVtb2xvR2FpbiIsInNjaGVkdWxlZEV2ZW50cyIsImxvdyIsIm1pZCIsImhpZ2giLCJjbG9zZSIsImNhbGN1bGF0ZUZyZXF1ZW5jeSIsImxvZ01pbiIsImxvZ01heCIsImNvbnN0cnVjdG9yIiwiTWFwIiwiU2V0IiwiYXVkaW9FbmdpbmUiLCJnZXRBdWRpb0VuZ2luZSIsInJlc2V0QXVkaW9FbmdpbmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/audioEngine.ts\n"));

/***/ })

});